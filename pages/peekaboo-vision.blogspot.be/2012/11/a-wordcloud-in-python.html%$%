<!DOCTYPE html>
<html class='v2' dir='ltr' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<!--SYNTAX HIGHLIGHTER BEGINS-->
<link href='http://alexgorbatchev.com/pub/sh/current/styles/shCore.css' rel='stylesheet' type='text/css'/>
<link href='http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/>
<script src='http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js' type='text/javascript'></script>
<script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPython.js' type='text/javascript'></script>
<script language='javascript'>
SyntaxHighlighter.config.bloggerMode = true;
SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf';
SyntaxHighlighter.all();
</script>
<!--SYNTAX HIGHLIGHTER ENDS-->
<head>
<script src='http://cdn.mathjax.org/mathjax/latest/MathJax.js' type='text/javascript'>    
    MathJax.Hub.Config({
        HTML: ["input/TeX","output/HTML-CSS"],
        TeX: { extensions: ["AMSmath.js","AMSsymbols.js"], 
               equationNumbers: { autoNumber: "AMS" } },
        extensions: ["tex2jax.js"],
        jax: ["input/TeX","output/HTML-CSS"],
        tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                   displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                   processEscapes: true },
        "HTML-CSS": { availableFonts: ["TeX"],
                      linebreaks: { automatic: true } }
    });
</script>
<meta content='IE=EmulateIE7' http-equiv='X-UA-Compatible'/>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<script type="text/javascript">(function() { var b=window,f="chrome",g="tick",k="jstiming";(function(){function d(a){this.t={};this.tick=function(a,d,c){var e=void 0!=c?c:(new Date).getTime();this.t[a]=[e,d];if(void 0==c)try{b.console.timeStamp("CSI/"+a)}catch(h){}};this[g]("start",null,a)}var a;b.performance&&(a=b.performance.timing);var n=a?new d(a.responseStart):new d;b.jstiming={Timer:d,load:n};if(a){var c=a.navigationStart,h=a.responseStart;0<c&&h>=c&&(b[k].srt=h-c)}if(a){var e=b[k].load;0<c&&h>=c&&(e[g]("_wtsrt",void 0,c),e[g]("wtsrt_","_wtsrt",h),e[g]("tbsd_","wtsrt_"))}try{a=null,
b[f]&&b[f].csi&&(a=Math.floor(b[f].csi().pageT),e&&0<c&&(e[g]("_tbnd",void 0,b[f].csi().startE),e[g]("tbnd_","_tbnd",c))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),null==a&&b.external&&(a=b.external.pageT,e&&0<c&&(e[g]("_tbnd",void 0,b.external.startE),e[g]("tbnd_","_tbnd",c))),a&&(b[k].pt=a)}catch(p){}})();b.tickAboveFold=function(d){var a=0;if(d.offsetParent){do a+=d.offsetTop;while(d=d.offsetParent)}d=a;750>=d&&b[k].load[g]("aft")};var l=!1;function m(){l||(l=!0,b[k].load[g]("firstScrollTime"))}b.addEventListener?b.addEventListener("scroll",m,!1):b.attachEvent("onscroll",m);
 })();</script>
<meta content='blogger' name='generator'/>
<link href='http://peekaboo-vision.blogspot.be/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Peekaboo - Atom" href="http://peekaboo-vision.blogspot.com/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Peekaboo - RSS" href="http://peekaboo-vision.blogspot.com/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Peekaboo - Atom" href="http://www.blogger.com/feeds/7345806147365425073/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Peekaboo - Atom" href="http://peekaboo-vision.blogspot.com/feeds/1871837941182536709/comments/default" />
<!--[if IE]><script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/1163241896-ieretrofit.js"></script>
<![endif]-->
<link href='http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s400/constitution_.png' rel='image_src'/>
<link href='https://plus.google.com/112544080214919445884' rel='publisher'/>
<!--[if IE]> <script> (function() { var html5 = ("abbr,article,aside,audio,canvas,datalist,details," + "figure,footer,header,hgroup,mark,menu,meter,nav,output," + "progress,section,time,video").split(','); for (var i = 0; i < html5.length; i++) { document.createElement(html5[i]); } try { document.execCommand('BackgroundImageCache', false, true); } catch(e) {} })(); </script> <![endif]-->
<title>Peekaboo: A Wordcloud in Python</title>
<script type="text/javascript">
if (navigator.userAgent.indexOf('MSIE 6') == -1) {
  WebFontConfig = {
    google: { families: [ 'Droid Sans', 'Consolas' ],
    api: '//themes.googleusercontent.com/fonts/css?kit=KAcgnVa0IBppVRWtHAiHYidjkAxwF36HXPrAYy89PB0'
    },
    loading: function() {
      if (window.jstiming) window.jstiming.load.tick('webfontLoading');
    },
    active: function() {
      if (window.jstiming) window.jstiming.load.tick('webfontActive');
    }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = '//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
} else {
  document.documentElement.className = 'wf-inactive';
}
</script>
<style type="text/css">
.wf-inactive body, .wf-droidsans-n4-loading body, .wf-droidsans-n4-inactive body {
  font-family: sans-serif;
}
.wf-inactive .header h1, .wf-droidsans-n4-loading .header h1, .wf-droidsans-n4-inactive .header h1 {
  font-family: sans-serif;
}
.wf-inactive .header .description, .wf-consolas-n4-loading .header .description, .wf-consolas-n4-inactive .header .description {
  font-family: sans-serif;
}
.wf-inactive .main-inner .widget h2.date-header, .wf-droidsans-n4-loading .main-inner .widget h2.date-header, .wf-droidsans-n4-inactive .main-inner .widget h2.date-header, .wf-inactive .main-inner .widget h2.date-header span, .wf-droidsans-n4-loading .main-inner .widget h2.date-header span, .wf-droidsans-n4-inactive .main-inner .widget h2.date-header span {
  font-family: sans-serif;
}
.wf-inactive h3.post-title, .wf-droidsans-n4-loading h3.post-title, .wf-droidsans-n4-inactive h3.post-title, .wf-inactive h4, .wf-droidsans-n4-loading h4, .wf-droidsans-n4-inactive h4, .wf-inactive h3.post-title a, .wf-droidsans-n4-loading h3.post-title a, .wf-droidsans-n4-inactive h3.post-title a {
  font-family: sans-serif;
}
.wf-inactive .sidebar .widget, .wf-droidsans-n4-loading .sidebar .widget, .wf-droidsans-n4-inactive .sidebar .widget {
  font-family: sans-serif;
}
</style>
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/static/v1/widgets/1535467126-widget_css_2_bundle.css' />
<link type='text/css' rel='stylesheet' href='//www.google.com/uds/css/gsearch.css' />
<link type='text/css' rel='stylesheet' href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=7345806147365425073&zx=a30d90bf-e0f8-4c49-9505-5872aa6af125' />
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Awesome Inc.
Designer: Tina Chen
URL:      tinachen.org
----------------------------------------------- */
/* Variable definitions
====================
<Variable name="keycolor" description="Main Color" type="color" default="#ffffff"/>
<Group description="Page" selector="body">
<Variable name="body.font" description="Font" type="font"
default="normal normal 13px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="body.background.color" description="Background Color" type="color" default="#000000"/>
<Variable name="body.text.color" description="Text Color" type="color" default="#ffffff"/>
</Group>
<Group description="Links" selector=".main-inner">
<Variable name="link.color" description="Link Color" type="color" default="#888888"/>
<Variable name="link.visited.color" description="Visited Color" type="color" default="#444444"/>
<Variable name="link.hover.color" description="Hover Color" type="color" default="#cccccc"/>
</Group>
<Group description="Blog Title" selector=".header h1">
<Variable name="header.font" description="Title Font" type="font"
default="normal bold 40px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="header.text.color" description="Title Color" type="color" default="#222222" />
<Variable name="header.background.color" description="Header Background" type="color" default="transparent" />
</Group>
<Group description="Blog Description" selector=".header .description">
<Variable name="description.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="description.text.color" description="Text Color" type="color"
default="#222222" />
</Group>
<Group description="Tabs Text" selector=".tabs-inner .widget li a">
<Variable name="tabs.font" description="Font" type="font"
default="normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="tabs.text.color" description="Text Color" type="color" default="#222222"/>
<Variable name="tabs.selected.text.color" description="Selected Color" type="color" default="#333333"/>
</Group>
<Group description="Tabs Background" selector=".tabs-outer .PageList">
<Variable name="tabs.background.color" description="Background Color" type="color" default="#141414"/>
<Variable name="tabs.selected.background.color" description="Selected Color" type="color" default="#444444"/>
<Variable name="tabs.border.color" description="Border Color" type="color" default="#666666"/>
</Group>
<Group description="Date Header" selector=".main-inner .widget h2.date-header, .main-inner .widget h2.date-header span">
<Variable name="date.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="date.text.color" description="Text Color" type="color" default="#666666"/>
<Variable name="date.border.color" description="Border Color" type="color" default="#666666"/>
</Group>
<Group description="Post Title" selector="h3.post-title, h4, h3.post-title a">
<Variable name="post.title.font" description="Font" type="font"
default="normal bold 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="post.title.text.color" description="Text Color" type="color" default="#222222"/>
</Group>
<Group description="Post Background" selector=".post">
<Variable name="post.background.color" description="Background Color" type="color" default="#fefdfa" />
<Variable name="post.border.color" description="Border Color" type="color" default="#666666" />
<Variable name="post.border.bevel.color" description="Bevel Color" type="color" default="#666666"/>
</Group>
<Group description="Gadget Title" selector="h2">
<Variable name="widget.title.font" description="Font" type="font"
default="normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="widget.title.text.color" description="Text Color" type="color" default="#222222"/>
</Group>
<Group description="Gadget Text" selector=".sidebar .widget">
<Variable name="widget.font" description="Font" type="font"
default="normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif"/>
<Variable name="widget.text.color" description="Text Color" type="color" default="#222222"/>
<Variable name="widget.alternate.text.color" description="Alternate Color" type="color" default="#666666"/>
</Group>
<Group description="Gadget Links" selector=".sidebar .widget">
<Variable name="widget.link.color" description="Link Color" type="color" default="#d52a33"/>
<Variable name="widget.link.visited.color" description="Visited Color" type="color" default="#7d181e"/>
<Variable name="widget.link.hover.color" description="Hover Color" type="color" default="#d52a33"/>
</Group>
<Group description="Gadget Background" selector=".sidebar .widget">
<Variable name="widget.background.color" description="Background Color" type="color" default="#141414"/>
<Variable name="widget.border.color" description="Border Color" type="color" default="#222222"/>
<Variable name="widget.border.bevel.color" description="Bevel Color" type="color" default="#000000"/>
</Group>
<Group description="Sidebar Background" selector=".column-left-inner .column-right-inner">
<Variable name="widget.outer.background.color" description="Background Color" type="color" default="transparent" />
</Group>
<Group description="Images" selector=".main-inner">
<Variable name="image.background.color" description="Background Color" type="color" default="transparent"/>
<Variable name="image.border.color" description="Border Color" type="color" default="transparent"/>
</Group>
<Group description="Feed" selector=".blog-feeds">
<Variable name="feed.text.color" description="Text Color" type="color" default="#222222"/>
</Group>
<Group description="Feed Links" selector=".blog-feeds">
<Variable name="feed.link.color" description="Link Color" type="color" default="#d52a33"/>
<Variable name="feed.link.visited.color" description="Visited Color" type="color" default="#7d181e"/>
<Variable name="feed.link.hover.color" description="Hover Color" type="color" default="#d52a33"/>
</Group>
<Group description="Pager" selector=".blog-pager">
<Variable name="pager.background.color" description="Background Color" type="color" default="#fefdfa" />
</Group>
<Group description="Footer" selector=".footer-outer">
<Variable name="footer.background.color" description="Background Color" type="color" default="#fefdfa" />
<Variable name="footer.text.color" description="Text Color" type="color" default="#222222" />
</Group>
<Variable name="title.shadow.spread" description="Title Shadow" type="length" default="-1px"/>
<Variable name="body.background" description="Body Background" type="background"
color="#ffffff"
default="$(color) none repeat scroll top left"/>
<Variable name="body.background.gradient.cap" description="Body Gradient Cap" type="url"
default="none"/>
<Variable name="body.background.size" description="Body Background Size" type="string" default="auto"/>
<Variable name="tabs.background.gradient" description="Tabs Background Gradient" type="url"
default="none"/>
<Variable name="header.background.gradient" description="Header Background Gradient" type="url" default="none" />
<Variable name="header.padding.top" description="Header Top Padding" type="length" default="22px" />
<Variable name="header.margin.top" description="Header Top Margin" type="length" default="0" />
<Variable name="header.margin.bottom" description="Header Bottom Margin" type="length" default="0" />
<Variable name="widget.padding.top" description="Widget Padding Top" type="length" default="8px" />
<Variable name="widget.padding.side" description="Widget Padding Side" type="length" default="15px" />
<Variable name="widget.outer.margin.top" description="Widget Top Margin" type="length" default="0" />
<Variable name="widget.outer.background.gradient" description="Gradient" type="url" default="none" />
<Variable name="widget.border.radius" description="Gadget Border Radius" type="length" default="0" />
<Variable name="outer.shadow.spread" description="Outer Shadow Size" type="length" default="0" />
<Variable name="date.header.border.radius.top" description="Date Header Border Radius Top" type="length" default="0" />
<Variable name="date.header.position" description="Date Header Position" type="length" default="15px" />
<Variable name="date.space" description="Date Space" type="length" default="30px" />
<Variable name="date.position" description="Date Float" type="string" default="static" />
<Variable name="date.padding.bottom" description="Date Padding Bottom" type="length" default="0" />
<Variable name="date.border.size" description="Date Border Size" type="length" default="0" />
<Variable name="date.background" description="Date Background" type="background" color="transparent"
default="$(color) none no-repeat scroll top left" />
<Variable name="date.first.border.radius.top" description="Date First top radius" type="length" default="5px" />
<Variable name="date.last.space.bottom" description="Date Last Space Bottom" type="length"
default="20px" />
<Variable name="date.last.border.radius.bottom" description="Date Last bottom radius" type="length" default="5px" />
<Variable name="post.first.padding.top" description="First Post Padding Top" type="length" default="0" />
<Variable name="image.shadow.spread" description="Image Shadow Size" type="length" default="0"/>
<Variable name="image.border.radius" description="Image Border Radius" type="length" default="0"/>
<Variable name="separator.outdent" description="Separator Outdent" type="length" default="15px" />
<Variable name="title.separator.border.size" description="Widget Title Border Size" type="length" default="1px" />
<Variable name="list.separator.border.size" description="List Separator Border Size" type="length" default="1px" />
<Variable name="shadow.spread" description="Shadow Size" type="length" default="0"/>
<Variable name="startSide" description="Side where text starts in blog language" type="automatic" default="left"/>
<Variable name="endSide" description="Side where text ends in blog language" type="automatic" default="right"/>
<Variable name="date.side" description="Side where date header is placed" type="string" default="right"/>
<Variable name="pager.border.radius.top" description="Pager Border Top Radius" type="length" default="5px" />
<Variable name="pager.space.top" description="Pager Top Space" type="length" default="1em" />
<Variable name="footer.background.gradient" description="Background Gradient" type="url" default="none" />
<Variable name="mobile.background.size" description="Mobile Background Size" type="string"
default="auto"/>
<Variable name="mobile.background.overlay" description="Mobile Background Overlay" type="string"
default="transparent none repeat scroll top left"/>
<Variable name="mobile.button.color" description="Mobile Button Color" type="color" default="#ffffff" />
*/
/* Content
----------------------------------------------- */
body {
font: normal normal 14px Droid Sans;
color: #222222;
background: #ffffff none repeat scroll top left;
}
html body .content-outer {
min-width: 0;
max-width: 100%;
width: 100%;
}
a:link {
text-decoration: none;
color: #d52a33;
}
a:visited {
text-decoration: none;
color: #7d181e;
}
a:hover {
text-decoration: underline;
color: #d52a33;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 276px;
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
/* Columns
----------------------------------------------- */
.content-inner {
padding: 0;
}
.header-inner .section {
margin: 0 16px;
}
.tabs-inner .section {
margin: 0 16px;
}
.main-inner {
padding-top: 30px;
}
.main-inner .column-center-inner,
.main-inner .column-left-inner,
.main-inner .column-right-inner {
padding: 0 5px;
}
*+html body .main-inner .column-center-inner {
margin-top: -30px;
}
#layout .main-inner .column-center-inner {
margin-top: 0;
}
/* Header
----------------------------------------------- */
.header-outer {
margin: 0 0 0 0;
background: transparent none repeat scroll 0 0;
}
.Header h1 {
font: normal normal 48px Droid Sans;
color: #222222;
text-shadow: 0 0 -1px #000000;
}
.Header h1 a {
color: #222222;
}
.Header .description {
font: normal normal 20px Consolas;
color: #908d6a;
}
.header-inner .Header .titlewrapper,
.header-inner .Header .descriptionwrapper {
padding-left: 0;
padding-right: 0;
margin-bottom: 0;
}
.header-inner .Header .titlewrapper {
padding-top: 22px;
}
/* Tabs
----------------------------------------------- */
.tabs-outer {
overflow: hidden;
position: relative;
background: #b3ca88 url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat scroll 0 0;
}
#layout .tabs-outer {
overflow: visible;
}
.tabs-cap-top, .tabs-cap-bottom {
position: absolute;
width: 100%;
border-top: 1px solid #908d6a;
}
.tabs-cap-bottom {
bottom: 0;
}
.tabs-inner .widget li a {
display: inline-block;
margin: 0;
padding: .6em 1.5em;
font: normal normal 13px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #333333;
border-top: 1px solid #908d6a;
border-bottom: 1px solid #908d6a;
border-left: 1px solid #908d6a;
height: 16px;
line-height: 16px;
}
.tabs-inner .widget li:last-child a {
border-right: 1px solid #908d6a;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
background: #63704b url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat-x scroll 0 -100px;
color: #ffffff;
}
/* Headings
----------------------------------------------- */
h2 {
font: normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #222222;
}
/* Widgets
----------------------------------------------- */
.main-inner .section {
margin: 0 27px;
padding: 0;
}
.main-inner .column-left-outer,
.main-inner .column-right-outer {
margin-top: 0;
}
#layout .main-inner .column-left-outer,
#layout .main-inner .column-right-outer {
margin-top: 0;
}
.main-inner .column-left-inner,
.main-inner .column-right-inner {
background: transparent none repeat 0 0;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, .2);
box-shadow: 0 0 0 rgba(0, 0, 0, .2);
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-goog-ms-border-radius: 5px;
border-radius: 5px;
}
#layout .main-inner .column-left-inner,
#layout .main-inner .column-right-inner {
margin-top: 0;
}
.sidebar .widget {
font: normal normal 14px Droid Sans;
color: #222222;
}
.sidebar .widget a:link {
color: #d52a33;
}
.sidebar .widget a:visited {
color: #7d181e;
}
.sidebar .widget a:hover {
color: #d52a33;
}
.sidebar .widget h2 {
text-shadow: 0 0 -1px #000000;
}
.main-inner .widget {
background-color: #fefdfa;
border: 1px solid #666666;
padding: 0 15px 15px;
margin: 20px -16px;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-goog-ms-border-radius: 5px;
border-radius: 5px;
}
.main-inner .widget h2 {
margin: 0 -0;
padding: .6em 0 .5em;
border-bottom: 1px solid transparent;
}
.footer-inner .widget h2 {
padding: 0 0 .4em;
border-bottom: 1px solid transparent;
}
.main-inner .widget h2 + div, .footer-inner .widget h2 + div {
border-top: 1px solid #666666;
padding-top: 8px;
}
.main-inner .widget .widget-content {
margin: 0 -0;
padding: 7px 0 0;
}
.main-inner .widget ul, .main-inner .widget #ArchiveList ul.flat {
margin: -8px -15px 0;
padding: 0;
list-style: none;
}
.main-inner .widget #ArchiveList {
margin: -8px 0 0;
}
.main-inner .widget ul li, .main-inner .widget #ArchiveList ul.flat li {
padding: .5em 15px;
text-indent: 0;
color: #666666;
border-top: 0 solid #666666;
border-bottom: 1px solid transparent;
}
.main-inner .widget #ArchiveList ul li {
padding-top: .25em;
padding-bottom: .25em;
}
.main-inner .widget ul li:first-child, .main-inner .widget #ArchiveList ul.flat li:first-child {
border-top: none;
}
.main-inner .widget ul li:last-child, .main-inner .widget #ArchiveList ul.flat li:last-child {
border-bottom: none;
}
.post-body {
position: relative;
}
.main-inner .widget .post-body ul {
padding: 0 2.5em;
margin: .5em 0;
list-style: disc;
}
.main-inner .widget .post-body ul li {
padding: 0.25em 0;
margin-bottom: .25em;
color: #222222;
border: none;
}
.footer-inner .widget ul {
padding: 0;
list-style: none;
}
.widget .zippy {
color: #666666;
}
/* Posts
----------------------------------------------- */
body .main-inner .Blog {
padding: 0;
margin-bottom: 1em;
background-color: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
-goog-ms-box-shadow: 0 0 0 rgba(0, 0, 0, 0);
box-shadow: 0 0 0 rgba(0, 0, 0, 0);
}
.main-inner .section:last-child .Blog:last-child {
padding: 0;
margin-bottom: 1em;
}
.main-inner .widget h2.date-header {
margin: 0 -15px 1px;
padding: 0 0 0 0;
font: normal normal 10px Droid Sans;
color: #908d6a;
background: transparent none no-repeat scroll top left;
border-top: 0 solid #666666;
border-bottom: 1px solid transparent;
-moz-border-radius-topleft: 0;
-moz-border-radius-topright: 0;
-webkit-border-top-left-radius: 0;
-webkit-border-top-right-radius: 0;
border-top-left-radius: 0;
border-top-right-radius: 0;
position: static;
bottom: 100%;
right: 15px;
text-shadow: 0 0 -1px #000000;
}
.main-inner .widget h2.date-header span {
font: normal normal 10px Droid Sans;
display: block;
padding: .5em 15px;
border-left: 0 solid #666666;
border-right: 0 solid #666666;
}
.date-outer {
position: relative;
margin: 30px 0 20px;
padding: 0 15px;
background-color: #fefdfa;
border: 1px solid #666666;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-goog-ms-border-radius: 5px;
border-radius: 5px;
}
.date-outer:first-child {
margin-top: 0;
}
.date-outer:last-child {
margin-bottom: 20px;
-moz-border-radius-bottomleft: 5px;
-moz-border-radius-bottomright: 5px;
-webkit-border-bottom-left-radius: 5px;
-webkit-border-bottom-right-radius: 5px;
-goog-ms-border-bottom-left-radius: 5px;
-goog-ms-border-bottom-right-radius: 5px;
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
}
.date-posts {
margin: 0 -0;
padding: 0 0;
clear: both;
}
.post-outer, .inline-ad {
border-top: 1px solid #ffffff;
margin: 0 -0;
padding: 15px 0;
}
.post-outer {
padding-bottom: 10px;
}
.post-outer:first-child {
padding-top: 0;
border-top: none;
}
.post-outer:last-child, .inline-ad:last-child {
border-bottom: none;
}
.post-body {
position: relative;
}
.post-body img {
padding: 8px;
background: #ffffff;
border: 1px solid #cccccc;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
}
h3.post-title, h4 {
font: normal normal 24px Droid Sans;
color: #d52a33;
}
h3.post-title a {
font: normal normal 24px Droid Sans;
color: #d52a33;
}
h3.post-title a:hover {
color: #d52a33;
text-decoration: underline;
}
.post-header {
margin: 0 0 1em;
}
.post-body {
line-height: 1.4;
}
.post-outer h2 {
color: #222222;
}
.post-footer {
margin: 1.5em 0 0;
}
#blog-pager {
padding: 15px;
font-size: 120%;
background-color: #fefdfa;
border: 1px solid #666666;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
-goog-ms-border-radius: 5px;
border-radius: 5px;
-moz-border-radius-topleft: 5px;
-moz-border-radius-topright: 5px;
-webkit-border-top-left-radius: 5px;
-webkit-border-top-right-radius: 5px;
-goog-ms-border-top-left-radius: 5px;
-goog-ms-border-top-right-radius: 5px;
border-top-left-radius: 5px;
border-top-right-radius-topright: 5px;
margin-top: 1em;
}
.blog-feeds, .post-feeds {
margin: 1em 0;
text-align: center;
color: #222222;
}
.blog-feeds a, .post-feeds a {
color: #d52a33;
}
.blog-feeds a:visited, .post-feeds a:visited {
color: #7d181e;
}
.blog-feeds a:hover, .post-feeds a:hover {
color: #d52a33;
}
.post-outer .comments {
margin-top: 2em;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #908d6a;
border-bottom: 1px solid #908d6a;
}
.comments .continue {
border-top: 2px solid #908d6a;
}
/* Footer
----------------------------------------------- */
.footer-outer {
margin: -20px 0 -1px;
padding: 20px 0 0;
color: #222222;
overflow: hidden;
}
.footer-fauxborder-left {
border-top: 1px solid #666666;
background: #fefdfa none repeat scroll 0 0;
-moz-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-webkit-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
-goog-ms-box-shadow: 0 0 20px rgba(0, 0, 0, .2);
box-shadow: 0 0 20px rgba(0, 0, 0, .2);
margin: 0 -20px;
}
/* Mobile
----------------------------------------------- */
body.mobile {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
*+html body.mobile .main-inner .column-center-inner {
margin-top: 0;
}
.mobile .main-inner .widget {
padding: 0 0 15px;
}
.mobile .main-inner .widget h2 + div,
.mobile .footer-inner .widget h2 + div {
border-top: none;
padding-top: 0;
}
.mobile .footer-inner .widget h2 {
padding: 0.5em 0;
border-bottom: none;
}
.mobile .main-inner .widget .widget-content {
margin: 0;
padding: 7px 0 0;
}
.mobile .main-inner .widget ul,
.mobile .main-inner .widget #ArchiveList ul.flat {
margin: 0 -15px 0;
}
.mobile .main-inner .widget h2.date-header {
right: 0;
}
.mobile .date-header span {
padding: 0.4em 0;
}
.mobile .date-outer:first-child {
margin-bottom: 0;
border: 1px solid #666666;
-moz-border-radius-topleft: 5px;
-moz-border-radius-topright: 5px;
-webkit-border-top-left-radius: 5px;
-webkit-border-top-right-radius: 5px;
-goog-ms-border-top-left-radius: 5px;
-goog-ms-border-top-right-radius: 5px;
border-top-left-radius: 5px;
border-top-right-radius: 5px;
}
.mobile .date-outer {
border-color: #666666;
border-width: 0 1px 1px;
}
.mobile .date-outer:last-child {
margin-bottom: 0;
}
.mobile .main-inner {
padding: 0;
}
.mobile .header-inner .section {
margin: 0;
}
.mobile .post-outer, .mobile .inline-ad {
padding: 5px 0;
}
.mobile .tabs-inner .section {
margin: 0 10px;
}
.mobile .main-inner .widget h2 {
margin: 0;
padding: 0;
}
.mobile .main-inner .widget h2.date-header span {
padding: 0;
}
.mobile .main-inner .widget .widget-content {
margin: 0;
padding: 7px 0 0;
}
.mobile #blog-pager {
border: 1px solid transparent;
background: #fefdfa none repeat scroll 0 0;
}
.mobile .main-inner .column-left-inner,
.mobile .main-inner .column-right-inner {
background: transparent none repeat 0 0;
-moz-box-shadow: none;
-webkit-box-shadow: none;
-goog-ms-box-shadow: none;
box-shadow: none;
}
.mobile .date-posts {
margin: 0;
padding: 0;
}
.mobile .footer-fauxborder-left {
margin: 0;
border-top: inherit;
}
.mobile .main-inner .section:last-child .Blog:last-child {
margin-bottom: 0;
}
.mobile-index-contents {
color: #222222;
}
.mobile .mobile-link-button {
background: #d52a33 url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png) repeat scroll 0 0;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .PageList .widget-content {
background: transparent;
border-top: 1px solid;
border-color: #908d6a;
color: #333333;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #908d6a;
}
.post-footer {font-size: 7pt}
--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 900px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 900px;
max-width: 900px;
_width: 900px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 300px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 300px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("300px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 300px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 300px;
margin-right: -300px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
--></style>
<script type="text/javascript">var a="indexOf",b="&m=1",e="(^|&)m=",f="?",g="?m=1";function h(){var c=window.location.href,d=c.split(f);switch(d.length){case 1:return c+g;case 2:return 0<=d[1].search(e)?null:c+b;default:return null}}var k=navigator.userAgent;if(-1!=k[a]("Mobile")&&-1!=k[a]("WebKit")&&-1==k[a]("iPad")||-1!=k[a]("Opera Mini")||-1!=k[a]("IEMobile")){var l=h();l&&window.location.replace(l)};
</script><script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('headEnd');
</script></head>
<body class='loading variant-renewable'>
<div class='navbar section' id='navbar'><div class='widget Navbar' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript">
        gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
          if (gapi.iframes && gapi.iframes.getContext) {
            gapi.iframes.getContext().openChild({
                url: 'https://www.blogger.com/navbar.g?targetBlogID\0757345806147365425073\46blogName\75Peekaboo\46publishMode\75PUBLISH_MODE_BLOGSPOT\46navbarType\75LIGHT\46layoutType\75LAYOUTS\46searchRoot\75http://peekaboo-vision.blogspot.com/search\46blogLocale\75en\46v\0752\46homepageUrl\75http://peekaboo-vision.blogspot.com/\46targetPostID\0751871837941182536709\46blogPostOrPageUrl\75http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html\46blogFollowUrl\75https://plus.google.com/112544080214919445884\46vt\0757834673867676182024',
                where: document.getElementById("navbar-iframe-container"),
                id: "navbar-iframe"
            });
          }
        });
      </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header'><div class='widget Header' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://peekaboo-vision.blogspot.be/'>Peekaboo</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>Andy's Computer Vision and Machine Learning Blog</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs section' id='crosscol'></div>
<div class='tabs section' id='crosscol-overflow'></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main'><div class='widget Blog' id='Blog1'>
<div class='blog-posts hfeed'>
<!-- google_ad_section_start(name=default) -->

          <div class="date-outer">
        
<h2 class='date-header'><span>Tuesday, November 6, 2012</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s72-c/constitution_.png' itemprop='image_url'/>
<a name='1871837941182536709'></a>
<h3 class='post-title entry-title' itemprop='name'>
A Wordcloud in Python
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-1871837941182536709' itemprop='description articleBody'>
Last week I was at <a href="https://2012.de.pycon.org/">Pycon DE</a>, the German Python conference. After hacking on scikit-learn a lot last week, I decided to to something different on my way back, that I had planned for quite a while:<br />
doing a <a href="http://www.wordle.net/">wordl</a>-like <a href="http://www.infobarrel.com/media/image/54054.jpg">word cloud</a>.<br />
<br />
I know, word clouds are a bit out of style but I kind of like them any way. My motivation to think about word clouds was that I thought these could be combined with topic-models to give somewhat more interesting visualizations.<br />
<br />
So I looked around to find a nice open-source implementation of word-clouds ... only to find none. (This has been a while, maybe it has changed since).<br />
<br />
While I was bored in the train last week, I came up with <a href="https://github.com/amueller/word_cloud">this code</a>.<br />
A little today-themed taste:<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-YkVjVFJPGbU/UJmCkWc3K4I/AAAAAAAAAJc/XRmusia-O2E/s1600/constitution.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><br /></a></div>
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s1600/constitution_.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s400/constitution_.png" width="400" /></a></div>
<br />
<br />
<a name='more'></a><br />
The first step is to get some document. I used the <a href="http://www.archives.gov/exhibits/charters/constitution_transcript.html">constitution of the united states </a>for the above.<br />
<pre class="brush:python">    with open("constitution.txt") as f:
        lines f.readlines()                                                                            
    text = "".join(lines)             
</pre>
<br />
The next step is to extract words and give the words some weighting - for example how often they occur in the document.
I used scikit-learn's <a href="http://scikit-learn.org/dev/modules/feature_extraction.html#common-vectorizer-usage">CountVectorizer</a> for that as it is convenient and fast, but you could also use <a href="http://nltk.org/">nltk</a> or just some regexp.<br />
I get the counts of the 200 most common non-stopwords and normalize by the maximum count (to be somewhat invariant to document size).<br />
<br />
<pre class="brush:python">cv = CountVectorizer(min_df=0, charset_error="ignore",                                               
                         stop_words="english", max_features=200)
counts = cv.fit_transform([text]).toarray().ravel()                                                  
words = np.array(cv.get_feature_names()) 
# normalize                                                                                                                                             
counts = counts / float(counts.max())

</pre>
<br />
Now the real work starts. The basic idea is to randomly sample a place on the canvas and draw a word with a size related to its importance (frequency).<br />
We have to take care not to make the words overlap, though.<br />
<br />
There seems to be no good alternative to the <a href="http://www.pythonware.com/products/pil/">Python image library</a> (PIL), which is really, really horrible. There are no docstrings. You specify colors using strings. There is a weird module structure. There are no docstrings.<br />
<br />
Any way, we can get a canvas and a drawing object like this:
<br />
<pre class="brush:python">img_grey = Image.new("L", (width, height))
draw = ImageDraw.Draw(img_grey)
</pre>
We can then write in the image using
<br />
<pre class="brush:python">font = ImageFont.truetype(font_path, font_size)
draw.setfont(font)
draw.text((y, x), "Text that will appear in white", fill="white")</pre>
The<code> font_path</code>
here is an absolute path to a true type font on your system. I found now way to get around this (didn't look very hard, though).<br />
<br />
Ok, now we could draw random positions and see if we could draw there without touching any other words.<br />
There is a handy function in <code>ImageDraw.textsize</code>, which tells you how large a piece of text will be once rendered. We can use that to test if there is any overlap.<br />
<br />
Unfortunately, random sampling any place in the image turns out to be very inefficient: if a lot of the room is already taken, we have to try quite often to find some space.<br />
<br />
My next idea was first to find out all possible free places in the image and then sample randomly from those. The easiest way to find free positions is to convolve the current image with a box of size <code>ImageDraw.textsize(next_word)</code>. The places where the result is zero are exactly the places that have enough room for the text.<br />
Using <code>scipy.ndimage.uniform_filter</code> that worked quite nicely.<br />
<br />
But what do we do if there is not enough room to draw a word in the size we want?<br />
Then we have to make the font smaller and try again. Which means convolving the image again, this time with a somewhat smaller box.<br />
<br />
The code wasn't very fast and this seemed pretty wasteful, so I wanted to use another approach:<a href="http://en.wikipedia.org/wiki/Integral_image"> integral images</a>! Integral images are a way to pre-compute a simple 2d structure from which it is possible to extract the sum over arbitrary rectangles in the image in constant time.<br />
The integral image is basically a 2d cumulative sum and can be computed as
<code>integral_image = np.cumsum(np.cumsum(image, axis=0), axis=1)</code>.
This can be done once, and then we can look up rectangles of any size very fast.
If we are interested in windows of size <code>(w, h)</code> we can find the sum over all possible windows of this size via

<br />
<pre class="brush:python">area = (integral_image[w:, h:] + integral_image[:w, :h]
        - integral_image[w:, :h] - integral_image[:w, h:])
</pre>
This is a combination of the integral image query (<a href="http://en.wikipedia.org/wiki/Integral_image">see wikipedia</a>) and my favorite numpy trick to query all positions simulataneuosly.<br />
So basically this does the same as the convolution above, only it precomputes a structure so that we can query for all possible windows sizes.<br />
<br />
After drawing a word, we have to compute the integral image again.<br />
Unfortunately, the fancy indexing with the integral image was a bit sluggish.<br />
<br />
On the other hand, that was a great opportunity to try out <a href="http://docs.cython.org/src/userguide/memoryviews.html">typed memory views</a> in <a href="http://cython.org/">cython</a>, which I <a href="https://2012.de.pycon.org/programm/schedule/sessions/8/">learned about </a>from<a href="http://consulting.behnel.de/"> Stefan Behnel</a> at Pycon DE :)


<br />
<pre class="brush:python">def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):
    cdef int x = integral_image.shape[0]
    cdef int y = integral_image.shape[1]
    cdef int area, i, j
    x_pos, y_pos = []
    for i in xrange(x - size_x):
        for j in xrange(y - size_y):
            area = integral_image[i, j] + integral_image[i + size_x, j + size_y]
            area -= integral_image[i + size_x, j] + integral_image[i, j + size_y]
            if not area:
                x_pos.append(i)
                y_pos.append(j)
</pre>
Awesome! Easy to write down and straight to C-Speed.<br />
<br />
Except for the last two lines ... lists are not fast.<br />
I couldn't get that much faster (the <a href="http://docs.python.org/2/library/array.html">array module</a> doesn't have a C API afaik).<br />
<br />
I wanted to sample from all possible positions any way, so I just rand the above code twice: once counting how many possible positions there are, then sampling, then going to the position that I sampled.<br />
Using C++ lists would probably be easier but I was to lazy to try...<br />
<br />
Anyhow, now I had pretty decent integral images :)<br />
The building still took some time, though... so I lazily recomputed only the part that is changed after I draw a new word.<br />
Check out the full code on <a href="https://github.com/amueller/word_cloud">github</a>.<br />
It is not very pretty but I think should be quite readable.<br />
<br />
Less talk more pictures:<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-WkzZOACNIXQ/UJmRe2M_GFI/AAAAAAAAAJ4/IevGaoqYmT4/s1600/constitution2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://2.bp.blogspot.com/-WkzZOACNIXQ/UJmRe2M_GFI/AAAAAAAAAJ4/IevGaoqYmT4/s400/constitution2.png" width="400" />&nbsp;</a>&nbsp;</div>
<div class="separator" style="clear: both; text-align: center;">
</div>
<br />
To scale the fonts I used some arbitrary logarithmic dependency on the frequency, that I felt looked decent.<br />
It is also possible just to become smaller if there is no more room.<br />
<br />
Oh and of course I allowed flipping of the words :)

I also played with using arbitrary colors. I didn't see anything like colormaps in PIL, so I just used the <a href="http://en.wikipedia.org/wiki/Hsl_color_space">HSL </a>space and just sampled the hue. More elaborate schemes are obviously possible.<br />
<br />
Again, I used a slight trick for a bit more speed: I first computed everything in grey-scale, saved all the positions and then re-did it in color.<br />
<br />
One more, this time a bit more with the theme of the blog (can you guess what this is?)
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://2.bp.blogspot.com/-DkYdVOITxEM/UJmSwk4AURI/AAAAAAAAAKE/aqAigDXGDQg/s1600/prml3.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://2.bp.blogspot.com/-DkYdVOITxEM/UJmSwk4AURI/AAAAAAAAAKE/aqAigDXGDQg/s400/prml3.png" width="400" /></a></div>
<br />
And with less saturation:<br />
<br />
<br />
<div class="separator" style="clear: both; text-align: center;">
<a href="http://3.bp.blogspot.com/-deMvj5fVHLI/UJmS3zyIwlI/AAAAAAAAAKQ/sWIzQyHQzj0/s1600/prml2.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="http://3.bp.blogspot.com/-deMvj5fVHLI/UJmS3zyIwlI/AAAAAAAAAKQ/sWIzQyHQzj0/s400/prml2.png" width="400" /></a></div>
<br />
There is definitely some room for improvement w.r.t. the look of it, but I feel this is already a nice start if you want to play around.<br />
<br />
One last comment: I though about improving performance (apparently the only thing on my mind during this little project) by doing the whole thing at a lower resolution and then recreating it at a higher one.<br />
This has two problems: if you use a too small resolution, some text might actually become invisible as it is too small. The other problem is that PIL's font sizes don't scale linearly. So it is not possible to say "I want this font 4 times larger".<br />
You can work around that but it's not pretty.<br />
So I went with the cython / integral image way, which I think is kind of cool :)<br />
<br />
&nbsp;If you scrolled down for the <a href="https://github.com/amueller/word_cloud">code, it is here</a>.<br />
<br />
PS: yes, this doesn't generate css / html4. But as you get the text sizes and positions, it should be easy to use this as a backend to generate a html page. PR welcome ;) 
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'><span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='https://plus.google.com/112544080214919445884' itemprop='url'/>
<meta content='7345806147365425073' itemprop='articleBody/aiaBlogId'/>
<meta content='1871837941182536709' itemprop='articleBody/aiaPostId'/>
<a href='https://plus.google.com/112544080214919445884' rel='author' title='author profile'>
<span itemprop='name'>Andreas Mueller</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://peekaboo-vision.blogspot.be/2012/11/a-wordcloud-in-python.html' itemprop='url'/>
<a class='timestamp-link' href='http://peekaboo-vision.blogspot.be/2012/11/a-wordcloud-in-python.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2012-11-06T23:59:00+01:00'>11:59 PM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-control blog-admin pid-1953288424'>
<a href='http://www.blogger.com/post-edit.g?blogID=7345806147365425073&postID=1871837941182536709&from=pencil' title='Edit Post'>
<img alt='' class='icon-action' height='18' src='http://img2.blogblog.com/img/icon18_edit_allbkg.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='http://www.blogger.com/share-post.g?blogID=7345806147365425073&postID=1871837941182536709&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='http://www.blogger.com/share-post.g?blogID=7345806147365425073&postID=1871837941182536709&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='http://www.blogger.com/share-post.g?blogID=7345806147365425073&postID=1871837941182536709&target=twitter' target='_blank' title='Share to Twitter'><span class='share-button-link-text'>Share to Twitter</span></a><a class='goog-inline-block share-button sb-facebook' href='http://www.blogger.com/share-post.g?blogID=7345806147365425073&postID=1871837941182536709&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='http://www.blogger.com/share-post.g?blogID=7345806147365425073&postID=1871837941182536709&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a><div class='goog-inline-block dummy-container'><g:plusone source='blogger:blog:plusone' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html' size='medium' width='300' annotation='inline'/></div>
</div>
<span class='post-backlinks post-comment-link'>
</span>
</div>
<div class='post-footer-line post-footer-line-2'><span class='post-labels'>
Labels:
<a href='http://peekaboo-vision.blogspot.be/search/label/coding' rel='tag'>coding</a>,
<a href='http://peekaboo-vision.blogspot.be/search/label/nlp' rel='tag'>nlp</a>,
<a href='http://peekaboo-vision.blogspot.be/search/label/nltk' rel='tag'>nltk</a>,
<a href='http://peekaboo-vision.blogspot.be/search/label/numpy' rel='tag'>numpy</a>,
<a href='http://peekaboo-vision.blogspot.be/search/label/python' rel='tag'>python</a>,
<a href='http://peekaboo-vision.blogspot.be/search/label/scikit-learn' rel='tag'>scikit-learn</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'><span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>36 comments:</h4>
<div class='comments-content'>
<script async='async' src='//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js' type='text/javascript'></script>
<script type='text/javascript'>
    (function() {
      var items = [{'id': '8737196509209751626', 'body': 'Very nice!\74br /\76\74br /\76As an alternative to PIL, what about using PyQt / PySide and paint into a QPixmap? It may need a bit more code but I guess more people have PyQt / PySide than PIL.\74br /\76\74br /\76Thomas', 'timestamp': '1352283553112', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751352283553112#c8737196509209751626', 'author': {'name': 'Thomas Mansencal', 'avatarUrl': '//lh6.googleusercontent.com/-vtEhrww0yd8/AAAAAAAAAAI/AAAAAAAAACY/DfNFIjfkwrI/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/00074906410947000193'}, 'displayTime': 'November 7, 2012 at 11:19 AM', 'deleteclass': 'item-control blog-admin pid-1272453544'}, {'id': '5371074703561387724', 'parentId': '8737196509209751626', 'body': 'Thanks.\74br /\76I\46#39;m not really familiar with PyQt and I wanted a short simple piece of code (sort of).\74br /\76\74br /\76The real work is done in numpy and as long as the you can easily get the data out of the QPixmap into a numpy array, replacing PIL should be easy.', 'timestamp': '1352284024220', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751352284024220#c5371074703561387724', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAAJU/QZqVl1267B4/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'November 7, 2012 at 11:27 AM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '7326278078687266310', 'body': 'Great job Andreas ... I did an implementation of wordly cloud in Python years back using PyQt and it was great fun ... You output is much better then mine. It\46#39;s truly a fun exercise to do is what I can recall. http://uptosomething.in', 'timestamp': '1352284953462', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751352284953462#c7326278078687266310', 'author': {'name': 'Ankur', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/06246893085826262512'}, 'displayTime': 'November 7, 2012 at 11:42 AM', 'deleteclass': 'item-control blog-admin pid-1993818301'}, {'id': '761566562238252473', 'parentId': '7326278078687266310', 'body': 'Thanks :) Did you use rectangles to model the place where a word is or the rendered word, as I do it?', 'timestamp': '1352285111914', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751352285111914#c761566562238252473', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAAJU/QZqVl1267B4/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'November 7, 2012 at 11:45 AM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '7449150316732155383', 'body': 'COOL!!!!', 'timestamp': '1352300733957', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751352300733957#c7449150316732155383', 'author': {'name': 'Fangirl ^^', 'avatarUrl': 'http://img1.blogblog.com/img/blank.gif', 'profileUrl': ''}, 'displayTime': 'November 7, 2012 at 4:05 PM', 'deleteclass': 'item-control blog-admin pid-1685181665'}, {'id': '3212927924835969293', 'body': 'Hi Andreas, Thanks for the Python based word-cloud. Looks indeed nice :)\74br /\76http://pycloud.blogspot.com/2012/11/worldcloud-for-ccnworks.html', 'timestamp': '1352317832279', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751352317832279#c3212927924835969293', 'author': {'name': 'Gkhan Sever', 'avatarUrl': 'http://1.bp.blogspot.com/-zlBFOH9iC4I/TdQa26HXpLI/AAAAAAAAAvk/FN1KoAozSpc/s45/20101006_008.jpg', 'profileUrl': 'http://www.blogger.com/profile/17112569021092421804'}, 'displayTime': 'November 7, 2012 at 8:50 PM', 'deleteclass': 'item-control blog-admin pid-1188744624'}, {'id': '2931478664878342591', 'body': 'Hi Andreas,\74br /\76\74br /\76Really cool one. I tried with non-english text also it wirks. Earlier I use PyTagClou but it misses the multilingual word-cloud facility. https://github.com/atizo/PyTagCloud', 'timestamp': '1359264557902', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751359264557902#c2931478664878342591', 'author': {'name': '&#3405;&#3405;&#3391; &#3405;&#3390;&#3405;&#3390;&#3390;&#3331;', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/09242412069326074764'}, 'displayTime': 'January 27, 2013 at 6:29 AM', 'deleteclass': 'item-control blog-admin pid-304234930'}, {'id': '8602194421750795833', 'body': 'Very cool !', 'timestamp': '1359318759308', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751359318759308#c8602194421750795833', 'author': {'name': 'Anonymous', 'avatarUrl': 'http://img1.blogblog.com/img/blank.gif', 'profileUrl': ''}, 'displayTime': 'January 27, 2013 at 9:32 PM', 'deleteclass': 'item-control blog-admin pid-1479216014'}, {'id': '1145747092569710675', 'body': 'Very Nice, I unfortunately once - in 1987 - had to implement a postcript word-cloud. Now I\46#39;m using Jason Davis\46#39; d3 version.', 'timestamp': '1359586824752', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751359586824752#c1145747092569710675', 'author': {'name': 'thanos', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/00186073093527764204'}, 'displayTime': 'January 31, 2013 at 12:00 AM', 'deleteclass': 'item-control blog-admin pid-451401774'}, {'id': '8407399523349064118', 'parentId': '1145747092569710675', 'body': 'Thanks. The d3 version is pretty good, indeed :)', 'timestamp': '1359634271978', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751359634271978#c8407399523349064118', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'January 31, 2013 at 1:11 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '251763934513851133', 'body': 'I have a Javascript version of a WordCloud at https://github.com/indyarmy/jQuery.awesomeCloud.plugin - not directly comparable, but it will do clouds in shapes other than a parallellogram.', 'timestamp': '1360046206980', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751360046206980#c251763934513851133', 'author': {'name': 'Russ Porosky', 'avatarUrl': '//lh5.googleusercontent.com/-FS7FOAhTe8U/AAAAAAAAAAI/AAAAAAAAAM8/6fu82B4uk90/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/05385751130791911245'}, 'displayTime': 'February 5, 2013 at 7:36 AM', 'deleteclass': 'item-control blog-admin pid-1068524952'}, {'id': '2131890603578731406', 'body': 'Instead of choosing a random place on the image and then drawing a specific word, why don\46#39;t you start filling up the image in a orderly fashion with random words?', 'timestamp': '1377896896655', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751377896896655#c2131890603578731406', 'author': {'name': 'Anonymous', 'avatarUrl': 'http://img1.blogblog.com/img/blank.gif', 'profileUrl': ''}, 'displayTime': 'August 30, 2013 at 11:08 PM', 'deleteclass': 'item-control blog-admin pid-1910259159'}, {'id': '6605595293712963540', 'parentId': '2131890603578731406', 'body': 'It is not clear to me how to do that. The words have different sizes and shapes, so if you start from, say, the top right, the shape will become \46quot;unorderly\46quot; very soon and the collision detection will be as hard as it is with random assignments, I would guess.', 'timestamp': '1377949220190', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751377949220190#c6605595293712963540', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'August 31, 2013 at 1:40 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '1287697515526235531', 'body': 'Hi Andres!\74br /\76Thank you for the great post!\74br /\76I tried your script and I got this error message, I tried to google it but no luck.\74br /\76any idea?\74br /\76   def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):\74br /\76                                        ^\74br /\76SyntaxError: invalid syntax\74br /\76\74br /\76the arrow was under int[:,:] \74br /\76\74br /\76Thanks a lot!', 'timestamp': '1380207209429', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380207209429#c1287697515526235531', 'author': {'name': 'Karin', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13194901595021511450'}, 'displayTime': 'September 26, 2013 at 4:53 PM', 'deleteclass': 'item-control blog-admin pid-87593295'}, {'id': '6153755858755568100', 'parentId': '1287697515526235531', 'body': 'Hi Karin. I would guess that your cython is too old. Try \46quot;pip install --user --upgrade cython\46quot; to get a newer version.', 'timestamp': '1380209473030', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380209473030#c6153755858755568100', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'September 26, 2013 at 5:31 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '1563505231854116814', 'parentId': '1287697515526235531', 'body': 'Thank you Andreas for the quick reply! I run the command line you suggested and it upgrade the cython.\74br /\76when I run the word cloud script I got the same error.\74br /\76Any suggestion?\74br /\76\74br /\76Thank you very much!!!!', 'timestamp': '1380222706411', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380222706411#c1563505231854116814', 'author': {'name': 'Karin', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13194901595021511450'}, 'displayTime': 'September 26, 2013 at 9:11 PM', 'deleteclass': 'item-control blog-admin pid-87593295'}, {'id': '3049332248064134384', 'parentId': '1287697515526235531', 'body': 'How did you run the file? Compile using \46quot;make\46quot; or \46quot;python setup.py build_ext -i\46quot; as stated in the readme, and then call \46quot;python wordcloud.py\46quot;.', 'timestamp': '1380222912263', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380222912263#c3049332248064134384', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'September 26, 2013 at 9:15 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '8785050512503242896', 'body': 'I run \46quot;python setup.py build_ext -i\46quot; and I get this message :\46quot;running build_ext\46quot; then I run \46quot;python wordcloud.py\46quot; and I still get the message. ,maybe something to do with my configuration ubuntu system ?', 'timestamp': '1380226135694', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380226135694#c8785050512503242896', 'author': {'name': 'Karin', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13194901595021511450'}, 'displayTime': 'September 26, 2013 at 10:08 PM', 'deleteclass': 'item-control blog-admin pid-87593295'}, {'id': '9060830579916310905', 'parentId': '8785050512503242896', 'body': 'That is pretty odd. Can you give the exact error? The error is in the cython file, which should not be called by python. Having a syntax error in cython during runtime is ... weird..', 'timestamp': '1380226364523', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380226364523#c9060830579916310905', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'September 26, 2013 at 10:12 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '7517383983947675201', 'body': 'sure!\74br /\76when I run : \46quot;python wordcloud.py\46quot; I get this bellow:\74br /\76\74br /\76Traceback (most recent call last):\74br /\76  File \46quot;wordcloud.py\46quot;, line 13, in \74br /\76    from query_integral_image import query_integral_image\74br /\76  File \46quot;/var/www/word_cloud-master/query_integral_image.py\46quot;, line 7\74br /\76    def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):\74br /\76                                        ^\74br /\76SyntaxError: invalid syntax', 'timestamp': '1380229741653', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380229741653#c7517383983947675201', 'author': {'name': 'Karin', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13194901595021511450'}, 'displayTime': 'September 26, 2013 at 11:09 PM', 'deleteclass': 'item-control blog-admin pid-87593295'}, {'id': '3371173621158628643', 'parentId': '7517383983947675201', 'body': 'There should be no file query_integral_image.py, only query_integral_image.pyx. ', 'timestamp': '1380231400497', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380231400497#c3371173621158628643', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'September 26, 2013 at 11:36 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '7475941213602481410', 'body': 'my bad :( I copied the file to the my server and I rerun it again.\74br /\76now I get a different error message when I run make or \46quot;python setup.py build_ext -i\46quot; :\74br /\76\74br /\76python setup.py build_ext -i\74br /\76Compiling query_integral_image.pyx because it changed.\74br /\76Cythonizing query_integral_image.pyx\74br /\76\74br /\76Error compiling Cython file:\74br /\76------------------------------------------------------------\74br /\76...\74br /\76# cython: wraparound\75False\74br /\76import array\74br /\76import numpy as np\74br /\76\74br /\76\74br /\76def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):\74br /\76                                     ^\74br /\76------------------------------------------------------------\74br /\76\74br /\76query_integral_image.pyx:7:38: Expected an identifier or literal\74br /\76Traceback (most recent call last):\74br /\76  File \46quot;setup.py\46quot;, line 7, in \74br /\76    ext_modules\75cythonize(\46quot;*.pyx\46quot;),\74br /\76  File \46quot;/usr/lib/pymodules/python2.7/Cython/Build/Dependencies.py\46quot;, line 517, in cythonize\74br /\76    cythonize_one(pyx_file, c_file, quiet, options)\74br /\76  File \46quot;/usr/lib/pymodules/python2.7/Cython/Build/Dependencies.py\46quot;, line 540, in cythonize_one\74br /\76    raise CompileError(None, pyx_file)\74br /\76Cython.Compiler.Errors.CompileError: query_integral_image.pyx\74br /\76make: *** [all] Error 1', 'timestamp': '1380234629660', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751380234629660#c7475941213602481410', 'author': {'name': 'Karin', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/13194901595021511450'}, 'displayTime': 'September 27, 2013 at 12:30 AM', 'deleteclass': 'item-control blog-admin pid-87593295'}, {'id': '4942000862786645052', 'parentId': '7475941213602481410', 'body': 'And which version of Cython are you calling there? Can you try ``cython --version`` and ``python -c \46quot;import Cython; print(Cython.__version__)`` ? I would guess you have an older cython somewhere in your path.', 'timestamp': '1381764936606', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751381764936606#c4942000862786645052', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'October 14, 2013 at 5:35 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '2977255376118333069', 'body': 'Hi Andreas,\74br /\76\74br /\76Great work.\74br /\76I tried running your code and I get error message that I don\46#39;t know where it comes from.\74br /\76On the Windows in the CMD windows here is what I run and get:\74br /\76\74br /\76...\\wordcloudPython\\trunk\46gt;python setup.py build_ext -i\74br /\76\74br /\76running build_ext\74br /\76\74br /\76...\\wordcloudPython\\trunk\46gt;python wordcloud.py\74br /\76C:\\Python33\\lib\\site-packages\\sklearn\\feature_extraction\\text.py:615: Deprecatio\74br /\76nWarning: The charset_error parameter is deprecated as of version 0.14 and will\74br /\76be removed in 0.16. Use decode_error instead.\74br /\76  DeprecationWarning)\74br /\76Traceback (most recent call last):\74br /\76  File \46quot;wordcloud.py\46quot;, line 183, in \74br /\76    counts \75 make_wordcloud(words, counts, output_filename)\74br /\76  File \46quot;wordcloud.py\46quot;, line 102, in make_wordcloud\74br /\76    box_size \75 draw.textsize(word)\74br /\76  File \46quot;C:\\Python33\\lib\\site-packages\\PIL\\ImageDraw.py\46quot;, line 281, in textsize\74br /\76    return font.getsize(text)\74br /\76  File \46quot;C:\\Python33\\lib\\site-packages\\PIL\\ImageFont.py\46quot;, line 189, in getsize\74br /\76    w, h \75 self.font.getsize(text)[0]\74br /\76TypeError: \46#39;int\46#39; object is not iterable\74br /\76\74br /\76what is the reason for the error? And how should I run the code so it  gets the constitution.txt as input? (sorry I am new in Python).', 'timestamp': '1383538199931', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751383538199931#c2977255376118333069', 'author': {'name': 'an Engineer', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/08738248403629838861'}, 'displayTime': 'November 4, 2013 at 5:09 AM', 'deleteclass': 'item-control blog-admin pid-407481265'}, {'id': '1663672069624966528', 'parentId': '2977255376118333069', 'body': 'That error is weird as it is inside PIL. Did you change the font path in the file? You need to set \46quot;FONT_PATH\46quot; to a true-type font that exists on your system. The default will only work under Linux. The code uses the constitution by default but you can just pass another text file as command line argument.\74br /\76Hth,\74br /\76Andy', 'timestamp': '1383544485605', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751383544485605#c1663672069624966528', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'November 4, 2013 at 6:54 AM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '7650947992277306138', 'parentId': '2977255376118333069', 'body': 'Thanks Andy. After a lot of Google search I found this that resolved the error:\74br /\76To get it to work change line 189 in from C:\\Python33\\Lib\\site-packages\\PIL\\ImageFont.py:\74br /\76w, h \75 self.font.getsize(text)[0]\74br /\76to:\74br /\76w, h \75 self.font.getsize(text)\74br /\76\74br /\76Do you know if your code works with Persian (Farsi language) as well?', 'timestamp': '1383802764929', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751383802764929#c7650947992277306138', 'author': {'name': 'an Engineer', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/08738248403629838861'}, 'displayTime': 'November 7, 2013 at 6:39 AM', 'deleteclass': 'item-control blog-admin pid-407481265'}, {'id': '2106708183326123689', 'parentId': '2977255376118333069', 'body': 'So that is a bug in PIL under Python3? For Persian: basically yes. if:\74br /\0761) you pick a font that supports the signs,\74br /\0762)your text is properly encoded (utf8 and hopefully my code reads that correctly)\74br /\0763) the regular expression in the scikit-learn Vectorizer makes sense for the language (which is probably fine). The vectorizer tokenizes the text into words based on a simple regular expression that basically separates words at whitespaces and punctuation iirc. For languages where that is not meaningful you would need to adjust the regular expression (an optional argument to the Vectorizer).', 'timestamp': '1383803756957', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751383803756957#c2106708183326123689', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'November 7, 2013 at 6:55 AM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '5834901524604184631', 'parentId': '2977255376118333069', 'body': 'Yes, that is a bug in PIL for Python3.\74br /\76\74br /\76Thanks for the explanation for Persian language.\74br /\76I used a Persian font, and I debugged the code. It reads a persian text fine and in the code it creates correct \46quot;words\46quot; and \46quot;counts\46quot;but at the end the generated image is just a bunch of rectangles! do you know what should I do to create in image with Persian words in it? Thanks again for all your help.', 'timestamp': '1383834119176', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751383834119176#c5834901524604184631', 'author': {'name': 'an Engineer', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/08738248403629838861'}, 'displayTime': 'November 7, 2013 at 3:21 PM', 'deleteclass': 'item-control blog-admin pid-407481265'}, {'id': '8047727776671126665', 'parentId': '2977255376118333069', 'body': 'So do the extracted \46quot;words\46quot; make sense? And what is their encoding? The code just renders the words using PIL. I am not very familiar with PIL, sorry. You could try writing a stand-alone script that tries to render some word using PIL and see if the problem persists.', 'timestamp': '1383888826592', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751383888826592#c8047727776671126665', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'November 8, 2013 at 6:33 AM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '3594297554598355024', 'body': 'What does it mean to \46quot;make\46quot; this file?  The install and use instructions could be improved.  I\46#39;m on windows.', 'timestamp': '1386475871403', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751386475871403#c3594297554598355024', 'author': {'name': 'Anonymous', 'avatarUrl': 'http://img1.blogblog.com/img/blank.gif', 'profileUrl': ''}, 'displayTime': 'December 8, 2013 at 5:11 AM', 'deleteclass': 'item-control blog-admin pid-1249174157'}, {'id': '6682185499487454328', 'parentId': '3594297554598355024', 'body': 'It means running the program \46quot;make\46quot;, the way most software is build on most operating systems. You can just run \46quot;python setup.py build_ext -i\46quot; as I said above. Feel free to send a PR improving the Readme.', 'timestamp': '1386520718618', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751386520718618#c6682185499487454328', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'December 8, 2013 at 5:38 PM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '3493176550394108193', 'body': 'Hi Andy,\74br /\76\74br /\76I tried to re-install Python 3.3 and while your code was working before, now I get this error:\74br /\76\74br /\76from query_integral_image import query_integral_image\74br /\76ImportError: DLL load failed: %1 is not a valid Win32 application.\74br /\76\74br /\76Do you know what could be the reason?\74br /\76Thanks for the help.', 'timestamp': '1386742124277', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751386742124277#c3493176550394108193', 'author': {'name': 'An Engineer', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/02840599142048124700'}, 'displayTime': 'December 11, 2013 at 7:08 AM', 'deleteclass': 'item-control blog-admin pid-540378534'}, {'id': '6489281290987837396', 'body': 'This is really interesting. Though my brain can\46#39;t compered the stuff about integral images. I\46#39;ve been playing with making word clouds using bash scripting and ImageMagick, starting from a state of pretty much total ignorance on how to do it. Rather than randomly selecting points in the canvas and trying to put a word there I\46#39;ve been starting off by putting the most common word in the centre of the canvas and then checking for free space spiralling out from the centre.\74br /\76\74br /\76Your post provides an answer to a question I\46#39;ve been wondering about which is how do people get clouds to fit a specified shape, even just  a simple rectangle:\74br /\76\74br /\76\46quot;But what do we do if there is not enough room to draw a word in the size we want? Then we have to make the font smaller and try again.\46quot;\74br /\76\74br /\76However, this seems to conflict with the premise of a word cloud. As you put it:\74br /\76\74br /\76\46quot;&#8230;draw a word with a size related to its importance (frequency).\46quot;\74br /\76\74br /\76If you\46#39;re fitting words in to spaces by way of shrinking their size then aren\46#39;t you destroying the relationship between the size of the word and it\46#39;s frequency? Especially because as I read it if a word won\46#39;t fit in a space you just shrink it until it fits. Doesn\46#39;t this approach mean that you can potentially end up with a word of frequency N being drawn larger than one with frequency 2N? Or I have misunderstood something?\74br /\76\74br /\076', 'timestamp': '1390151291708', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751390151291708#c6489281290987837396', 'author': {'name': 'Anonymous', 'avatarUrl': 'http://img1.blogblog.com/img/blank.gif', 'profileUrl': ''}, 'displayTime': 'January 19, 2014 at 6:08 PM', 'deleteclass': 'item-control blog-admin pid-324542593'}, {'id': '8406865554719373956', 'parentId': '6489281290987837396', 'body': 'Hey. I think my approach to wordclouds is very non-standard. I also started from ignorance and tried something out. There is a paper about the wordl way, which I can\46#39;t find at the moment. I think this java-script implementation uses the same algorithm: it also relies on a spiral and a dynamic that moves the words apart if they overlap.\74br /\76\74br /\76Actually, the way I present the algorithm here (and the way it is implemented) it is true that the size does not correspond to the frequency. BUT the ranking of the words is preserved. I sort the words by frequency before I start drawing, and the size will only decrease. Maybe that wasn\46#39;t clear from my description.\74br /\76\74br /\76Hth,\74br /\76Andy', 'timestamp': '1390286512158', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751390286512158#c8406865554719373956', 'author': {'name': 'Andreas Mueller', 'avatarUrl': '//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg', 'profileUrl': 'http://www.blogger.com/profile/10177962095394942563'}, 'displayTime': 'January 21, 2014 at 7:41 AM', 'deleteclass': 'item-control blog-admin pid-1953288424'}, {'id': '5073465439079865230', 'parentId': '251763934513851133', 'body': 'Great Russ! So simple and so beatiful and powerful! Thanks a lot!!', 'timestamp': '1394593291652', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751394593291652#c5073465439079865230', 'author': {'name': 'jrinconcol', 'avatarUrl': 'http://img2.blogblog.com/img/b16-rounded.gif', 'profileUrl': 'http://www.blogger.com/profile/15729262181450733703'}, 'displayTime': 'March 12, 2014 at 4:01 AM', 'deleteclass': 'item-control blog-admin pid-502609059'}, {'id': '6036293421063483585', 'body': 'How difficult would it be to create an image where the background is white? I\46#39;ve tried playing around in the code- specifically adding color\75\46quot;white\46quot; parameter when all of the images are created, but was unsuccessful.', 'timestamp': '1401827337798', 'permalink': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment\0751401827337798#c6036293421063483585', 'author': {'name': 'Anonymous', 'avatarUrl': 'http://img1.blogblog.com/img/blank.gif', 'profileUrl': ''}, 'displayTime': 'June 3, 2014 at 10:28 PM', 'deleteclass': 'item-control blog-admin pid-212326646'}];
      var msgs = {'loadMore': 'Load more...', 'loading': 'Loading...', 'loaded': 'No more!', 'addComment': 'Add comment', 'reply': 'Reply', 'delete': 'Delete'};
      var config = {'blogId': '7345806147365425073', 'postId': '1871837941182536709', 'feed': 'http://peekaboo-vision.blogspot.com/feeds/1871837941182536709/comments/default', 'authorName': 'Andreas Mueller', 'authorUrl': 'http://www.blogger.com/profile/10177962095394942563', 'baseUri': 'http://www.blogger.com', 'maxThreadDepth': 2};

// <![CDATA[
      var cursor = null;
      if (items && items.length > 0) {
        cursor = parseInt(items[items.length - 1].timestamp) + 1;
      }

      var bodyFromEntry = function(entry) {
        if (entry.gd$extendedProperty) {
          for (var k in entry.gd$extendedProperty) {
            if (entry.gd$extendedProperty[k].name == 'blogger.contentRemoved') {
              return '<span class="deleted-comment">' + entry.content.$t + '</span>';
            }
          }
        }
        return entry.content.$t;
      }

      var parse = function(data) {
        cursor = null;
        var comments = [];
        if (data && data.feed && data.feed.entry) {
          for (var i = 0, entry; entry = data.feed.entry[i]; i++) {
            var comment = {};
            // comment ID, parsed out of the original id format
            var id = /blog-(\d+).post-(\d+)/.exec(entry.id.$t);
            comment.id = id ? id[2] : null;
            comment.body = bodyFromEntry(entry);
            comment.timestamp = Date.parse(entry.published.$t) + '';
            if (entry.author && entry.author.constructor === Array) {
              var auth = entry.author[0];
              if (auth) {
                comment.author = {
                  name: (auth.name ? auth.name.$t : undefined),
                  profileUrl: (auth.uri ? auth.uri.$t : undefined),
                  avatarUrl: (auth.gd$image ? auth.gd$image.src : undefined)
                };
              }
            }
            if (entry.link) {
              if (entry.link[2]) {
                comment.link = comment.permalink = entry.link[2].href;
              }
              if (entry.link[3]) {
                var pid = /.*comments\/default\/(\d+)\?.*/.exec(entry.link[3].href);
                if (pid && pid[1]) {
                  comment.parentId = pid[1];
                }
              }
            }
            comment.deleteclass = 'item-control blog-admin';
            if (entry.gd$extendedProperty) {
              for (var k in entry.gd$extendedProperty) {
                if (entry.gd$extendedProperty[k].name == 'blogger.itemClass') {
                  comment.deleteclass += ' ' + entry.gd$extendedProperty[k].value;
                } else if (entry.gd$extendedProperty[k].name == 'blogger.displayTime') {
                  comment.displayTime = entry.gd$extendedProperty[k].value;
                }
              }
            }
            comments.push(comment);
          }
        }
        return comments;
      };

      var paginator = function(callback) {
        if (hasMore()) {
          var url = config.feed + '?alt=json&v=2&orderby=published&reverse=false&max-results=50';
          if (cursor) {
            url += '&published-min=' + new Date(cursor).toISOString();
          }
          window.bloggercomments = function(data) {
            var parsed = parse(data);
            cursor = parsed.length < 50 ? null
                : parseInt(parsed[parsed.length - 1].timestamp) + 1
            callback(parsed);
            window.bloggercomments = null;
          }
          url += '&callback=bloggercomments';
          var script = document.createElement('script');
          script.type = 'text/javascript';
          script.src = url;
          document.getElementsByTagName('head')[0].appendChild(script);
        }
      };
      var hasMore = function() {
        return !!cursor;
      };
      var getMeta = function(key, comment) {
        if ('iswriter' == key) {
          var matches = !!comment.author
              && comment.author.name == config.authorName
              && comment.author.profileUrl == config.authorUrl;
          return matches ? 'true' : '';
        } else if ('deletelink' == key) {
          return config.baseUri + '/delete-comment.g?blogID='
               + config.blogId + '&postID=' + comment.id;
        } else if ('deleteclass' == key) {
          return comment.deleteclass;
        }
        return '';
      };

      var replybox = null;
      var replyUrlParts = null;
      var replyParent = undefined;

      var onReply = function(commentId, domId) {
        if (replybox == null) {
          // lazily cache replybox, and adjust to suit this style:
          replybox = document.getElementById('comment-editor');
          if (replybox != null) {
            replybox.height = '250px';
            replybox.style.display = 'block';
            replyUrlParts = replybox.src.split('#');
          }
        }
        if (replybox && (commentId !== replyParent)) {
          document.getElementById(domId).insertBefore(replybox, null);
          replybox.src = replyUrlParts[0]
              + (commentId ? '&parentID=' + commentId : '')
              + '#' + replyUrlParts[1];
          replyParent = commentId;
        }
      };

      var hash = (window.location.hash || '#').substring(1);
      var startThread, targetComment;
      if (/^comment-form_/.test(hash)) {
        startThread = hash.substring('comment-form_'.length);
      } else if (/^c[0-9]+$/.test(hash)) {
        targetComment = hash.substring(1);
      }

      // Configure commenting API:
      var configJso = {
        'maxDepth': config.maxThreadDepth
      };
      var provider = {
        'id': config.postId,
        'data': items,
        'loadNext': paginator,
        'hasMore': hasMore,
        'getMeta': getMeta,
        'onReply': onReply,
        'rendered': true,
        'initComment': targetComment,
        'initReplyThread': startThread,
        'config': configJso,
        'messages': msgs
      };

      var render = function() {
        if (window.goog && window.goog.comments) {
          var holder = document.getElementById('comment-holder');
          window.goog.comments.render(holder, provider);
        }
      };

      // render now, or queue to render when library loads:
      if (window.goog && window.goog.comments) {
        render();
      } else {
        window.goog = window.goog || {};
        window.goog.comments = window.goog.comments || {};
        window.goog.comments.loadQueue = window.goog.comments.loadQueue || [];
        window.goog.comments.loadQueue.push(render);
      }
    })();
// ]]>
</script>
<div id='comment-holder'>
<div id='bc_0_37C' kind='c'><div id='bc_0_37CT'><div id='bc_0_36T' class='comment-thread' kind='r'  t='0' u='0'><ol id='bc_0_36TB'><li id='bc_0_1B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh6.googleusercontent.com/-vtEhrww0yd8/AAAAAAAAAAI/AAAAAAAAACY/DfNFIjfkwrI/s512-c/photo.jpg'></img></div><div id='c8737196509209751626' class='comment-block'><div id='bc_0_1M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/00074906410947000193'>Thomas Mansencal</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1352283553112#c8737196509209751626'>November 7, 2012 at 11:19 AM</a></span></div><p id='bc_0_1MC' class='comment-content'>Very nice!<br /><br />As an alternative to PIL, what about using PyQt / PySide and paint into a QPixmap? It may need a bit more code but I guess more people have PyQt / PySide than PIL.<br /><br />Thomas</p><span id='bc_0_1MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1272453544'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=8737196509209751626'>Delete</a></span></span></div><div id='bc_0_1BR' class='comment-replies'><span id='bc_0_1b+seedXW5JD' kind='d'><div id='bc_0_0T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_0TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_0TA' class='thread-arrow'></span><span id='bc_0_0TN' class='thread-count'><span id='bc_0_0TNT' style='display: none;'></span><span id='bc_0_0TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_0TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_0TC' class='thread-chrome thread-expanded'><div><li id='bc_0_0B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAAJU/QZqVl1267B4/s512-c/photo.jpg'></img></div><div id='c5371074703561387724' class='comment-block'><div id='bc_0_0M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1352284024220#c5371074703561387724'>November 7, 2012 at 11:27 AM</a></span></div><p id='bc_0_0MC' class='comment-content'>Thanks.<br />I&#39;m not really familiar with PyQt and I wanted a short simple piece of code (sort of).<br /><br />The real work is done in numpy and as long as the you can easily get the data out of the QPixmap into a numpy array, replacing PIL should be easy.</p><span id='bc_0_0MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=5371074703561387724'>Delete</a></span></span></div><div id='bc_0_0BR' class='comment-replies'></div><div id='bc_0_0B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_0I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_0T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_1B_box' class='comment-replybox-single'></div></li><li id='bc_0_3B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c7326278078687266310' class='comment-block'><div id='bc_0_3M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/06246893085826262512'>Ankur</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1352284953462#c7326278078687266310'>November 7, 2012 at 11:42 AM</a></span></div><p id='bc_0_3MC' class='comment-content'>Great job Andreas ... I did an implementation of wordly cloud in Python years back using PyQt and it was great fun ... You output is much better then mine. It&#39;s truly a fun exercise to do is what I can recall. http://uptosomething.in</p><span id='bc_0_3MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1993818301'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=7326278078687266310'>Delete</a></span></span></div><div id='bc_0_3BR' class='comment-replies'><span id='bc_0_3b+seedXW5LD' kind='d'><div id='bc_0_2T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_2TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_2TA' class='thread-arrow'></span><span id='bc_0_2TN' class='thread-count'><span id='bc_0_2TNT' style='display: none;'></span><span id='bc_0_2TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_2TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_2TC' class='thread-chrome thread-expanded'><div><li id='bc_0_2B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAAJU/QZqVl1267B4/s512-c/photo.jpg'></img></div><div id='c761566562238252473' class='comment-block'><div id='bc_0_2M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1352285111914#c761566562238252473'>November 7, 2012 at 11:45 AM</a></span></div><p id='bc_0_2MC' class='comment-content'>Thanks :) Did you use rectangles to model the place where a word is or the rendered word, as I do it?</p><span id='bc_0_2MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=761566562238252473'>Delete</a></span></span></div><div id='bc_0_2BR' class='comment-replies'></div><div id='bc_0_2B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_2I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_2T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_3B_box' class='comment-replybox-single'></div></li><li id='bc_0_4B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img1.blogblog.com/img/anon36.png'></img></div><div id='c7449150316732155383' class='comment-block'><div id='bc_0_4M' class='comment-header' kind='m'><cite class='user'>Fangirl ^^</cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1352300733957#c7449150316732155383'>November 7, 2012 at 4:05 PM</a></span></div><p id='bc_0_4MC' class='comment-content'>COOL!!!!</p><span id='bc_0_4MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1685181665'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=7449150316732155383'>Delete</a></span></span></div><div id='bc_0_4BR' class='comment-replies'></div><div id='bc_0_4B_box' class='comment-replybox-single'></div></li><li id='bc_0_5B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://1.bp.blogspot.com/-zlBFOH9iC4I/TdQa26HXpLI/AAAAAAAAAvk/FN1KoAozSpc/s45/20101006_008.jpg'></img></div><div id='c3212927924835969293' class='comment-block'><div id='bc_0_5M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/17112569021092421804'>Gkhan Sever</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1352317832279#c3212927924835969293'>November 7, 2012 at 8:50 PM</a></span></div><p id='bc_0_5MC' class='comment-content'>Hi Andreas, Thanks for the Python based word-cloud. Looks indeed nice :)<br />http://pycloud.blogspot.com/2012/11/worldcloud-for-ccnworks.html</p><span id='bc_0_5MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1188744624'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=3212927924835969293'>Delete</a></span></span></div><div id='bc_0_5BR' class='comment-replies'></div><div id='bc_0_5B_box' class='comment-replybox-single'></div></li><li id='bc_0_6B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c2931478664878342591' class='comment-block'><div id='bc_0_6M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/09242412069326074764'>&#3405;&#3405;&#3391; &#3405;&#3390;&#3405;&#3390;&#3390;&#3331;</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1359264557902#c2931478664878342591'>January 27, 2013 at 6:29 AM</a></span></div><p id='bc_0_6MC' class='comment-content'>Hi Andreas,<br /><br />Really cool one. I tried with non-english text also it wirks. Earlier I use PyTagClou but it misses the multilingual word-cloud facility. https://github.com/atizo/PyTagCloud</p><span id='bc_0_6MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-304234930'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=2931478664878342591'>Delete</a></span></span></div><div id='bc_0_6BR' class='comment-replies'></div><div id='bc_0_6B_box' class='comment-replybox-single'></div></li><li id='bc_0_7B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img1.blogblog.com/img/anon36.png'></img></div><div id='c8602194421750795833' class='comment-block'><div id='bc_0_7M' class='comment-header' kind='m'><cite class='user'>Anonymous</cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1359318759308#c8602194421750795833'>January 27, 2013 at 9:32 PM</a></span></div><p id='bc_0_7MC' class='comment-content'>Very cool !</p><span id='bc_0_7MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1479216014'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=8602194421750795833'>Delete</a></span></span></div><div id='bc_0_7BR' class='comment-replies'></div><div id='bc_0_7B_box' class='comment-replybox-single'></div></li><li id='bc_0_9B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c1145747092569710675' class='comment-block'><div id='bc_0_9M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/00186073093527764204'>thanos</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1359586824752#c1145747092569710675'>January 31, 2013 at 12:00 AM</a></span></div><p id='bc_0_9MC' class='comment-content'>Very Nice, I unfortunately once - in 1987 - had to implement a postcript word-cloud. Now I&#39;m using Jason Davis&#39; d3 version.</p><span id='bc_0_9MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-451401774'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=1145747092569710675'>Delete</a></span></span></div><div id='bc_0_9BR' class='comment-replies'><span id='bc_0_9b+seedXW5RD' kind='d'><div id='bc_0_8T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_8TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_8TA' class='thread-arrow'></span><span id='bc_0_8TN' class='thread-count'><span id='bc_0_8TNT' style='display: none;'></span><span id='bc_0_8TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_8TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_8TC' class='thread-chrome thread-expanded'><div><li id='bc_0_8B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c8407399523349064118' class='comment-block'><div id='bc_0_8M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1359634271978#c8407399523349064118'>January 31, 2013 at 1:11 PM</a></span></div><p id='bc_0_8MC' class='comment-content'>Thanks. The d3 version is pretty good, indeed :)</p><span id='bc_0_8MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=8407399523349064118'>Delete</a></span></span></div><div id='bc_0_8BR' class='comment-replies'></div><div id='bc_0_8B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_8I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_8T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_9B_box' class='comment-replybox-single'></div></li><li id='bc_0_11B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh5.googleusercontent.com/-FS7FOAhTe8U/AAAAAAAAAAI/AAAAAAAAAM8/6fu82B4uk90/s512-c/photo.jpg'></img></div><div id='c251763934513851133' class='comment-block'><div id='bc_0_11M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/05385751130791911245'>Russ Porosky</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1360046206980#c251763934513851133'>February 5, 2013 at 7:36 AM</a></span></div><p id='bc_0_11MC' class='comment-content'>I have a Javascript version of a WordCloud at https://github.com/indyarmy/jQuery.awesomeCloud.plugin - not directly comparable, but it will do clouds in shapes other than a parallellogram.</p><span id='bc_0_11MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1068524952'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=251763934513851133'>Delete</a></span></span></div><div id='bc_0_11BR' class='comment-replies'><span id='bc_0_11b+seedXW5qD' kind='d'><div id='bc_0_10T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_10TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_10TA' class='thread-arrow'></span><span id='bc_0_10TN' class='thread-count'><span id='bc_0_10TNT' style='display: none;'></span><span id='bc_0_10TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_10TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_10TC' class='thread-chrome thread-expanded'><div><li id='bc_0_10B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c5073465439079865230' class='comment-block'><div id='bc_0_10M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/15729262181450733703'>jrinconcol</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1394593291652#c5073465439079865230'>March 12, 2014 at 4:01 AM</a></span></div><p id='bc_0_10MC' class='comment-content'>Great Russ! So simple and so beatiful and powerful! Thanks a lot!!</p><span id='bc_0_10MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-502609059'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=5073465439079865230'>Delete</a></span></span></div><div id='bc_0_10BR' class='comment-replies'></div><div id='bc_0_10B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_10I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_10T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_11B_box' class='comment-replybox-single'></div></li><li id='bc_0_13B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img1.blogblog.com/img/anon36.png'></img></div><div id='c2131890603578731406' class='comment-block'><div id='bc_0_13M' class='comment-header' kind='m'><cite class='user'>Anonymous</cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1377896896655#c2131890603578731406'>August 30, 2013 at 11:08 PM</a></span></div><p id='bc_0_13MC' class='comment-content'>Instead of choosing a random place on the image and then drawing a specific word, why don&#39;t you start filling up the image in a orderly fashion with random words?</p><span id='bc_0_13MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1910259159'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=2131890603578731406'>Delete</a></span></span></div><div id='bc_0_13BR' class='comment-replies'><span id='bc_0_13b+seedXW5UD' kind='d'><div id='bc_0_12T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_12TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_12TA' class='thread-arrow'></span><span id='bc_0_12TN' class='thread-count'><span id='bc_0_12TNT' style='display: none;'></span><span id='bc_0_12TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_12TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_12TC' class='thread-chrome thread-expanded'><div><li id='bc_0_12B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c6605595293712963540' class='comment-block'><div id='bc_0_12M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1377949220190#c6605595293712963540'>August 31, 2013 at 1:40 PM</a></span></div><p id='bc_0_12MC' class='comment-content'>It is not clear to me how to do that. The words have different sizes and shapes, so if you start from, say, the top right, the shape will become &quot;unorderly&quot; very soon and the collision detection will be as hard as it is with random assignments, I would guess.</p><span id='bc_0_12MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=6605595293712963540'>Delete</a></span></span></div><div id='bc_0_12BR' class='comment-replies'></div><div id='bc_0_12B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_12I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_12T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_13B_box' class='comment-replybox-single'></div></li><li id='bc_0_17B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c1287697515526235531' class='comment-block'><div id='bc_0_17M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13194901595021511450'>Karin</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380207209429#c1287697515526235531'>September 26, 2013 at 4:53 PM</a></span></div><p id='bc_0_17MC' class='comment-content'>Hi Andres!<br />Thank you for the great post!<br />I tried your script and I got this error message, I tried to google it but no luck.<br />any idea?<br />   def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):<br />                                        ^<br />SyntaxError: invalid syntax<br /><br />the arrow was under int[:,:] <br /><br />Thanks a lot!</p><span id='bc_0_17MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-87593295'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=1287697515526235531'>Delete</a></span></span></div><div id='bc_0_17BR' class='comment-replies'><span id='bc_0_17b+seedXW5WD' kind='d'><div id='bc_0_14T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_14TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_14TA' class='thread-arrow'></span><span id='bc_0_14TN' class='thread-count'><span id='bc_0_14TNT' style='display: none;'></span><span id='bc_0_14TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_14TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_14TC' class='thread-chrome thread-expanded'><div><li id='bc_0_14B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c6153755858755568100' class='comment-block'><div id='bc_0_14M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380209473030#c6153755858755568100'>September 26, 2013 at 5:31 PM</a></span></div><p id='bc_0_14MC' class='comment-content'>Hi Karin. I would guess that your cython is too old. Try &quot;pip install --user --upgrade cython&quot; to get a newer version.</p><span id='bc_0_14MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=6153755858755568100'>Delete</a></span></span></div><div id='bc_0_14BR' class='comment-replies'></div><div id='bc_0_14B_box' class='comment-replybox-single'></div></li><li id='bc_0_15B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c1563505231854116814' class='comment-block'><div id='bc_0_15M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13194901595021511450'>Karin</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380222706411#c1563505231854116814'>September 26, 2013 at 9:11 PM</a></span></div><p id='bc_0_15MC' class='comment-content'>Thank you Andreas for the quick reply! I run the command line you suggested and it upgrade the cython.<br />when I run the word cloud script I got the same error.<br />Any suggestion?<br /><br />Thank you very much!!!!</p><span id='bc_0_15MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-87593295'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=1563505231854116814'>Delete</a></span></span></div><div id='bc_0_15BR' class='comment-replies'></div><div id='bc_0_15B_box' class='comment-replybox-single'></div></li><li id='bc_0_16B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c3049332248064134384' class='comment-block'><div id='bc_0_16M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380222912263#c3049332248064134384'>September 26, 2013 at 9:15 PM</a></span></div><p id='bc_0_16MC' class='comment-content'>How did you run the file? Compile using &quot;make&quot; or &quot;python setup.py build_ext -i&quot; as stated in the readme, and then call &quot;python wordcloud.py&quot;.</p><span id='bc_0_16MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=3049332248064134384'>Delete</a></span></span></div><div id='bc_0_16BR' class='comment-replies'></div><div id='bc_0_16B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_14I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_14T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_17B_box' class='comment-replybox-single'></div></li><li id='bc_0_19B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c8785050512503242896' class='comment-block'><div id='bc_0_19M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13194901595021511450'>Karin</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380226135694#c8785050512503242896'>September 26, 2013 at 10:08 PM</a></span></div><p id='bc_0_19MC' class='comment-content'>I run &quot;python setup.py build_ext -i&quot; and I get this message :&quot;running build_ext&quot; then I run &quot;python wordcloud.py&quot; and I still get the message. ,maybe something to do with my configuration ubuntu system ?</p><span id='bc_0_19MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-87593295'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=8785050512503242896'>Delete</a></span></span></div><div id='bc_0_19BR' class='comment-replies'><span id='bc_0_19b+seedXW5aD' kind='d'><div id='bc_0_18T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_18TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_18TA' class='thread-arrow'></span><span id='bc_0_18TN' class='thread-count'><span id='bc_0_18TNT' style='display: none;'></span><span id='bc_0_18TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_18TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_18TC' class='thread-chrome thread-expanded'><div><li id='bc_0_18B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c9060830579916310905' class='comment-block'><div id='bc_0_18M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380226364523#c9060830579916310905'>September 26, 2013 at 10:12 PM</a></span></div><p id='bc_0_18MC' class='comment-content'>That is pretty odd. Can you give the exact error? The error is in the cython file, which should not be called by python. Having a syntax error in cython during runtime is ... weird..</p><span id='bc_0_18MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=9060830579916310905'>Delete</a></span></span></div><div id='bc_0_18BR' class='comment-replies'></div><div id='bc_0_18B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_18I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_18T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_19B_box' class='comment-replybox-single'></div></li><li id='bc_0_21B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c7517383983947675201' class='comment-block'><div id='bc_0_21M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13194901595021511450'>Karin</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380229741653#c7517383983947675201'>September 26, 2013 at 11:09 PM</a></span></div><p id='bc_0_21MC' class='comment-content'>sure!<br />when I run : &quot;python wordcloud.py&quot; I get this bellow:<br /><br />Traceback (most recent call last):<br />  File &quot;wordcloud.py&quot;, line 13, in <br />    from query_integral_image import query_integral_image<br />  File &quot;/var/www/word_cloud-master/query_integral_image.py&quot;, line 7<br />    def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):<br />                                        ^<br />SyntaxError: invalid syntax</p><span id='bc_0_21MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-87593295'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=7517383983947675201'>Delete</a></span></span></div><div id='bc_0_21BR' class='comment-replies'><span id='bc_0_21b+seedXW5cD' kind='d'><div id='bc_0_20T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_20TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_20TA' class='thread-arrow'></span><span id='bc_0_20TN' class='thread-count'><span id='bc_0_20TNT' style='display: none;'></span><span id='bc_0_20TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_20TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_20TC' class='thread-chrome thread-expanded'><div><li id='bc_0_20B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c3371173621158628643' class='comment-block'><div id='bc_0_20M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380231400497#c3371173621158628643'>September 26, 2013 at 11:36 PM</a></span></div><p id='bc_0_20MC' class='comment-content'>There should be no file query_integral_image.py, only query_integral_image.pyx. </p><span id='bc_0_20MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=3371173621158628643'>Delete</a></span></span></div><div id='bc_0_20BR' class='comment-replies'></div><div id='bc_0_20B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_20I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_20T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_21B_box' class='comment-replybox-single'></div></li><li id='bc_0_23B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c7475941213602481410' class='comment-block'><div id='bc_0_23M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/13194901595021511450'>Karin</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1380234629660#c7475941213602481410'>September 27, 2013 at 12:30 AM</a></span></div><p id='bc_0_23MC' class='comment-content'>my bad :( I copied the file to the my server and I rerun it again.<br />now I get a different error message when I run make or &quot;python setup.py build_ext -i&quot; :<br /><br />python setup.py build_ext -i<br />Compiling query_integral_image.pyx because it changed.<br />Cythonizing query_integral_image.pyx<br /><br />Error compiling Cython file:<br />------------------------------------------------------------<br />...<br /># cython: wraparound=False<br />import array<br />import numpy as np<br /><br /><br />def query_integral_image(unsigned int[:,:] integral_image, int size_x, int size_y):<br />                                     ^<br />------------------------------------------------------------<br /><br />query_integral_image.pyx:7:38: Expected an identifier or literal<br />Traceback (most recent call last):<br />  File &quot;setup.py&quot;, line 7, in <br />    ext_modules=cythonize(&quot;*.pyx&quot;),<br />  File &quot;/usr/lib/pymodules/python2.7/Cython/Build/Dependencies.py&quot;, line 517, in cythonize<br />    cythonize_one(pyx_file, c_file, quiet, options)<br />  File &quot;/usr/lib/pymodules/python2.7/Cython/Build/Dependencies.py&quot;, line 540, in cythonize_one<br />    raise CompileError(None, pyx_file)<br />Cython.Compiler.Errors.CompileError: query_integral_image.pyx<br />make: *** [all] Error 1</p><span id='bc_0_23MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-87593295'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=7475941213602481410'>Delete</a></span></span></div><div id='bc_0_23BR' class='comment-replies'><span id='bc_0_23b+seedXW5eD' kind='d'><div id='bc_0_22T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_22TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_22TA' class='thread-arrow'></span><span id='bc_0_22TN' class='thread-count'><span id='bc_0_22TNT' style='display: none;'></span><span id='bc_0_22TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_22TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_22TC' class='thread-chrome thread-expanded'><div><li id='bc_0_22B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c4942000862786645052' class='comment-block'><div id='bc_0_22M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1381764936606#c4942000862786645052'>October 14, 2013 at 5:35 PM</a></span></div><p id='bc_0_22MC' class='comment-content'>And which version of Cython are you calling there? Can you try ``cython --version`` and ``python -c &quot;import Cython; print(Cython.__version__)`` ? I would guess you have an older cython somewhere in your path.</p><span id='bc_0_22MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=4942000862786645052'>Delete</a></span></span></div><div id='bc_0_22BR' class='comment-replies'></div><div id='bc_0_22B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_22I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_22T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_23B_box' class='comment-replybox-single'></div></li><li id='bc_0_29B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c2977255376118333069' class='comment-block'><div id='bc_0_29M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/08738248403629838861'>an Engineer</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1383538199931#c2977255376118333069'>November 4, 2013 at 5:09 AM</a></span></div><p id='bc_0_29MC' class='comment-content'>Hi Andreas,<br /><br />Great work.<br />I tried running your code and I get error message that I don&#39;t know where it comes from.<br />On the Windows in the CMD windows here is what I run and get:<br /><br />...\wordcloudPython\trunk&gt;python setup.py build_ext -i<br /><br />running build_ext<br /><br />...\wordcloudPython\trunk&gt;python wordcloud.py<br />C:\Python33\lib\site-packages\sklearn\feature_extraction\text.py:615: Deprecatio<br />nWarning: The charset_error parameter is deprecated as of version 0.14 and will<br />be removed in 0.16. Use decode_error instead.<br />  DeprecationWarning)<br />Traceback (most recent call last):<br />  File &quot;wordcloud.py&quot;, line 183, in <br />    counts = make_wordcloud(words, counts, output_filename)<br />  File &quot;wordcloud.py&quot;, line 102, in make_wordcloud<br />    box_size = draw.textsize(word)<br />  File &quot;C:\Python33\lib\site-packages\PIL\ImageDraw.py&quot;, line 281, in textsize<br />    return font.getsize(text)<br />  File &quot;C:\Python33\lib\site-packages\PIL\ImageFont.py&quot;, line 189, in getsize<br />    w, h = self.font.getsize(text)[0]<br />TypeError: &#39;int&#39; object is not iterable<br /><br />what is the reason for the error? And how should I run the code so it  gets the constitution.txt as input? (sorry I am new in Python).</p><span id='bc_0_29MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-407481265'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=2977255376118333069'>Delete</a></span></span></div><div id='bc_0_29BR' class='comment-replies'><span id='bc_0_29b+seedXW5gD' kind='d'><div id='bc_0_24T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_24TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_24TA' class='thread-arrow'></span><span id='bc_0_24TN' class='thread-count'><span id='bc_0_24TNT' style='display: none;'></span><span id='bc_0_24TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_24TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_24TC' class='thread-chrome thread-expanded'><div><li id='bc_0_24B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c1663672069624966528' class='comment-block'><div id='bc_0_24M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1383544485605#c1663672069624966528'>November 4, 2013 at 6:54 AM</a></span></div><p id='bc_0_24MC' class='comment-content'>That error is weird as it is inside PIL. Did you change the font path in the file? You need to set &quot;FONT_PATH&quot; to a true-type font that exists on your system. The default will only work under Linux. The code uses the constitution by default but you can just pass another text file as command line argument.<br />Hth,<br />Andy</p><span id='bc_0_24MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=1663672069624966528'>Delete</a></span></span></div><div id='bc_0_24BR' class='comment-replies'></div><div id='bc_0_24B_box' class='comment-replybox-single'></div></li><li id='bc_0_25B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c7650947992277306138' class='comment-block'><div id='bc_0_25M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/08738248403629838861'>an Engineer</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1383802764929#c7650947992277306138'>November 7, 2013 at 6:39 AM</a></span></div><p id='bc_0_25MC' class='comment-content'>Thanks Andy. After a lot of Google search I found this that resolved the error:<br />To get it to work change line 189 in from C:\Python33\Lib\site-packages\PIL\ImageFont.py:<br />w, h = self.font.getsize(text)[0]<br />to:<br />w, h = self.font.getsize(text)<br /><br />Do you know if your code works with Persian (Farsi language) as well?</p><span id='bc_0_25MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-407481265'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=7650947992277306138'>Delete</a></span></span></div><div id='bc_0_25BR' class='comment-replies'></div><div id='bc_0_25B_box' class='comment-replybox-single'></div></li><li id='bc_0_26B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c2106708183326123689' class='comment-block'><div id='bc_0_26M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1383803756957#c2106708183326123689'>November 7, 2013 at 6:55 AM</a></span></div><p id='bc_0_26MC' class='comment-content'>So that is a bug in PIL under Python3? For Persian: basically yes. if:<br />1) you pick a font that supports the signs,<br />2)your text is properly encoded (utf8 and hopefully my code reads that correctly)<br />3) the regular expression in the scikit-learn Vectorizer makes sense for the language (which is probably fine). The vectorizer tokenizes the text into words based on a simple regular expression that basically separates words at whitespaces and punctuation iirc. For languages where that is not meaningful you would need to adjust the regular expression (an optional argument to the Vectorizer).</p><span id='bc_0_26MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=2106708183326123689'>Delete</a></span></span></div><div id='bc_0_26BR' class='comment-replies'></div><div id='bc_0_26B_box' class='comment-replybox-single'></div></li><li id='bc_0_27B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c5834901524604184631' class='comment-block'><div id='bc_0_27M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/08738248403629838861'>an Engineer</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1383834119176#c5834901524604184631'>November 7, 2013 at 3:21 PM</a></span></div><p id='bc_0_27MC' class='comment-content'>Yes, that is a bug in PIL for Python3.<br /><br />Thanks for the explanation for Persian language.<br />I used a Persian font, and I debugged the code. It reads a persian text fine and in the code it creates correct &quot;words&quot; and &quot;counts&quot;but at the end the generated image is just a bunch of rectangles! do you know what should I do to create in image with Persian words in it? Thanks again for all your help.</p><span id='bc_0_27MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-407481265'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=5834901524604184631'>Delete</a></span></span></div><div id='bc_0_27BR' class='comment-replies'></div><div id='bc_0_27B_box' class='comment-replybox-single'></div></li><li id='bc_0_28B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c8047727776671126665' class='comment-block'><div id='bc_0_28M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1383888826592#c8047727776671126665'>November 8, 2013 at 6:33 AM</a></span></div><p id='bc_0_28MC' class='comment-content'>So do the extracted &quot;words&quot; make sense? And what is their encoding? The code just renders the words using PIL. I am not very familiar with PIL, sorry. You could try writing a stand-alone script that tries to render some word using PIL and see if the problem persists.</p><span id='bc_0_28MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=8047727776671126665'>Delete</a></span></span></div><div id='bc_0_28BR' class='comment-replies'></div><div id='bc_0_28B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_24I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_24T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_29B_box' class='comment-replybox-single'></div></li><li id='bc_0_31B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img1.blogblog.com/img/anon36.png'></img></div><div id='c3594297554598355024' class='comment-block'><div id='bc_0_31M' class='comment-header' kind='m'><cite class='user'>Anonymous</cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1386475871403#c3594297554598355024'>December 8, 2013 at 5:11 AM</a></span></div><p id='bc_0_31MC' class='comment-content'>What does it mean to &quot;make&quot; this file?  The install and use instructions could be improved.  I&#39;m on windows.</p><span id='bc_0_31MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-1249174157'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=3594297554598355024'>Delete</a></span></span></div><div id='bc_0_31BR' class='comment-replies'><span id='bc_0_31b+seedXW5mD' kind='d'><div id='bc_0_30T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_30TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_30TA' class='thread-arrow'></span><span id='bc_0_30TN' class='thread-count'><span id='bc_0_30TNT' style='display: none;'></span><span id='bc_0_30TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_30TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_30TC' class='thread-chrome thread-expanded'><div><li id='bc_0_30B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c6682185499487454328' class='comment-block'><div id='bc_0_30M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1386520718618#c6682185499487454328'>December 8, 2013 at 5:38 PM</a></span></div><p id='bc_0_30MC' class='comment-content'>It means running the program &quot;make&quot;, the way most software is build on most operating systems. You can just run &quot;python setup.py build_ext -i&quot; as I said above. Feel free to send a PR improving the Readme.</p><span id='bc_0_30MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=6682185499487454328'>Delete</a></span></span></div><div id='bc_0_30BR' class='comment-replies'></div><div id='bc_0_30B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_30I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_30T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_31B_box' class='comment-replybox-single'></div></li><li id='bc_0_32B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img2.blogblog.com/img/b36-rounded.png'></img></div><div id='c3493176550394108193' class='comment-block'><div id='bc_0_32M' class='comment-header' kind='m'><cite class='user'><a rel='nofollow' href='http://www.blogger.com/profile/02840599142048124700'>An Engineer</a></cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1386742124277#c3493176550394108193'>December 11, 2013 at 7:08 AM</a></span></div><p id='bc_0_32MC' class='comment-content'>Hi Andy,<br /><br />I tried to re-install Python 3.3 and while your code was working before, now I get this error:<br /><br />from query_integral_image import query_integral_image<br />ImportError: DLL load failed: %1 is not a valid Win32 application.<br /><br />Do you know what could be the reason?<br />Thanks for the help.</p><span id='bc_0_32MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-540378534'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=3493176550394108193'>Delete</a></span></span></div><div id='bc_0_32BR' class='comment-replies'></div><div id='bc_0_32B_box' class='comment-replybox-single'></div></li><li id='bc_0_34B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img1.blogblog.com/img/anon36.png'></img></div><div id='c6489281290987837396' class='comment-block'><div id='bc_0_34M' class='comment-header' kind='m'><cite class='user'>Anonymous</cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1390151291708#c6489281290987837396'>January 19, 2014 at 6:08 PM</a></span></div><p id='bc_0_34MC' class='comment-content'>This is really interesting. Though my brain can&#39;t compered the stuff about integral images. I&#39;ve been playing with making word clouds using bash scripting and ImageMagick, starting from a state of pretty much total ignorance on how to do it. Rather than randomly selecting points in the canvas and trying to put a word there I&#39;ve been starting off by putting the most common word in the centre of the canvas and then checking for free space spiralling out from the centre.<br /><br />Your post provides an answer to a question I&#39;ve been wondering about which is how do people get clouds to fit a specified shape, even just  a simple rectangle:<br /><br />&quot;But what do we do if there is not enough room to draw a word in the size we want? Then we have to make the font smaller and try again.&quot;<br /><br />However, this seems to conflict with the premise of a word cloud. As you put it:<br /><br />&quot;&#8230;draw a word with a size related to its importance (frequency).&quot;<br /><br />If you&#39;re fitting words in to spaces by way of shrinking their size then aren&#39;t you destroying the relationship between the size of the word and it&#39;s frequency? Especially because as I read it if a word won&#39;t fit in a space you just shrink it until it fits. Doesn&#39;t this approach mean that you can potentially end up with a word of frequency N being drawn larger than one with frequency 2N? Or I have misunderstood something?<br /><br /></p><span id='bc_0_34MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-324542593'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=6489281290987837396'>Delete</a></span></span></div><div id='bc_0_34BR' class='comment-replies'><span id='bc_0_34b+seedXW5pD' kind='d'><div id='bc_0_33T' class='comment-thread inline-thread' kind='t'   t='0' u='0'><span id='bc_0_33TT' class='thread-toggle thread-expanded' kind='g'><span id='bc_0_33TA' class='thread-arrow'></span><span id='bc_0_33TN' class='thread-count'><span id='bc_0_33TNT' style='display: none;'></span><span id='bc_0_33TNU' style='display: none;'></span><a href='javascript:;' target='_self'>Replies</a><div id='bc_0_33TD' class='thread-dropContainer thread-expanded'><span class='thread-drop'></span></div></span></span><ol id='bc_0_33TC' class='thread-chrome thread-expanded'><div><li id='bc_0_33B' class='comment' kind='b'><div class='avatar-image-container'><img src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg'></img></div><div id='c8406865554719373956' class='comment-block'><div id='bc_0_33M' class='comment-header' kind='m'><cite class='user blog-author'><a rel='nofollow' href='http://www.blogger.com/profile/10177962095394942563'>Andreas Mueller</a></cite><span class='icon user blog-author'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1390286512158#c8406865554719373956'>January 21, 2014 at 7:41 AM</a></span></div><p id='bc_0_33MC' class='comment-content'>Hey. I think my approach to wordclouds is very non-standard. I also started from ignorance and tried something out. There is a paper about the wordl way, which I can&#39;t find at the moment. I think this java-script implementation uses the same algorithm: it also relies on a spiral and a dynamic that moves the words apart if they overlap.<br /><br />Actually, the way I present the algorithm here (and the way it is implemented) it is true that the size does not correspond to the frequency. BUT the ranking of the words is preserved. I sort the words by frequency before I start drawing, and the size will only decrease. Maybe that wasn&#39;t clear from my description.<br /><br />Hth,<br />Andy</p><span id='bc_0_33MN' class='comment-actions secondary-text' kind='m'><span class='item-control blog-admin pid-1953288424'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=8406865554719373956'>Delete</a></span></span></div><div id='bc_0_33BR' class='comment-replies'></div><div id='bc_0_33B_box' class='comment-replybox-single'></div></li></div><div id='bc_0_33I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Reply</a></div></ol><div id='bc_0_33T_box' class='comment-replybox-thread'></div></div></span></div><div id='bc_0_34B_box' class='comment-replybox-single'></div></li><li id='bc_0_35B' class='comment' kind='b'><div class='avatar-image-container'><img src='http://img1.blogblog.com/img/anon36.png'></img></div><div id='c6036293421063483585' class='comment-block'><div id='bc_0_35M' class='comment-header' kind='m'><cite class='user'>Anonymous</cite><span class='icon user'></span><span class='datetime secondary-text'><a rel='nofollow' href='http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html?showComment=1401827337798#c6036293421063483585'>June 3, 2014 at 10:28 PM</a></span></div><p id='bc_0_35MC' class='comment-content'>How difficult would it be to create an image where the background is white? I&#39;ve tried playing around in the code- specifically adding color=&quot;white&quot; parameter when all of the images are created, but was unsuccessful.</p><span id='bc_0_35MN' class='comment-actions secondary-text' kind='m'><a kind='i' href='javascript:;' target='_self' o='r'>Reply</a><span class='item-control blog-admin pid-212326646'><a o='d' target='_self' href='http://www.blogger.com/delete-comment.g?blogID=7345806147365425073&amp;postID=6036293421063483585'>Delete</a></span></span></div><div id='bc_0_35BR' class='comment-replies'></div><div id='bc_0_35B_box' class='comment-replybox-single'></div></li></ol><div id='bc_0_36I' class='continue' kind='ci'><a href='javascript:;' target='_self'>Add comment</a></div><div id='bc_0_36T_box' class='comment-replybox-thread'></div><div id='bc_0_36L' class='loadmore loaded' kind='rb'><a href='javascript:;' target='_self'>Load more...</a></div></div></div></div>
</div>
</div>
<p class='comment-footer'>
<div class='comment-form'>
<a name='comment-form'></a>
<p>
</p>
<a href='https://www.blogger.com/comment-iframe.g?blogID=7345806147365425073&postID=1871837941182536709' id='comment-editor-src'></a>
<iframe allowtransparency='true' class='blogger-iframe-colorize blogger-comment-from-post' frameborder='0' height='410' id='comment-editor' name='comment-editor' src='' width='100%'></iframe>
<script type="text/javascript" src="https://www.blogger.com/static/v1/jsbin/313381681-comment_from_post_iframe.js"></script>
<script type='text/javascript'>
      BLOG_CMT_createIframe('https://www.blogger.com/rpc_relay.html', '04007169371843981670');
    </script>
</div>
</p>
<div id='backlinks-container'>
<div id='Blog1_backlinks-container'>
<a name='links'></a><h4>
</h4>
<p class='comment-footer'>
<a class='comment-link' href='' id='Blog1_backlinks-create-link' target='_blank'>
</a>
</p>
</div>
</div>
</div>
</div>

        </div></div>
      
<!-- google_ad_section_end -->
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://peekaboo-vision.blogspot.be/2012/12/workshop-on-python-machine-learning-and.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://peekaboo-vision.blogspot.be/2012/10/animating-random-projections-of-high.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://peekaboo-vision.blogspot.be/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://peekaboo-vision.blogspot.com/feeds/1871837941182536709/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
<script type="text/javascript">window.___gcfg = {'lang': 'en'};</script>
</div></div>
</div>
</div>
<div class='column-left-outer'>
<div class='column-left-inner'>
<aside>
</aside>
</div>
</div>
<div class='column-right-outer'>
<div class='column-right-inner'>
<aside>
<div class='sidebar section' id='sidebar-right-1'><div class='widget PopularPosts' id='PopularPosts1'>
<h2>Popular Posts</h2>
<div class='widget-content popular-posts'>
<ul>
<li>
<div class='item-content'>
<div class='item-thumbnail'>
<a href='http://peekaboo-vision.blogspot.be/2013/01/machine-learning-cheat-sheet-for-scikit.html' target='_blank'>
<img alt='' border='0' height='72' src='http://1.bp.blogspot.com/-ME24ePzpzIM/UQLWTwurfXI/AAAAAAAAANw/W3EETIroA80/s72-c/drop_shadows_background.png' width='72'/>
</a>
</div>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2013/01/machine-learning-cheat-sheet-for-scikit.html'>Machine Learning Cheat Sheet (for scikit-learn)</a></div>
<div class='item-snippet'>As you hopefully have heard, we at scikit-learn  are doing a user survey  (which is still open by the way).  One of the requests there was t...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-thumbnail'>
<a href='http://peekaboo-vision.blogspot.be/2012/11/a-wordcloud-in-python.html' target='_blank'>
<img alt='' border='0' height='72' src='http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s72-c/constitution_.png' width='72'/>
</a>
</div>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2012/11/a-wordcloud-in-python.html'>A Wordcloud in Python</a></div>
<div class='item-snippet'>Last week I was at Pycon DE , the German Python conference. After hacking on scikit-learn a lot last week, I decided to to something differe...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-thumbnail'>
<a href='http://peekaboo-vision.blogspot.be/2012/12/kernel-approximations-for-efficient.html' target='_blank'>
<img alt='' border='0' height='72' src='http://1.bp.blogspot.com/-xLBj8-EvWdU/UNuDyX2K75I/AAAAAAAAAMY/Eg7Labb03zk/s72-c/kernel_trick1.png' width='72'/>
</a>
</div>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2012/12/kernel-approximations-for-efficient.html'>Kernel Approximations for Efficient SVMs (and other feature extraction methods) [update]</a></div>
<div class='item-snippet'>Recently we added another method for kernel approximation, the Nystrm method,  to scikit-learn , which will be featured in the upcoming 0.1...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2010/11/machine-learning-toolkits.html'>Machine Learning Toolkits</a></div>
<div class='item-snippet'>Wow. So much to read today .  While following link upon link, I found so many great toolkits that I think it is worth listing them here.  On...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2013/01/scikit-learn-013-released-we-want-your.html'>Scikit-Learn 0.13 released! We want your feedback.</a></div>
<div class='item-snippet'>After a little delay, the team finished work on the 0.13 release of scikit-learn.  There is also a user survey  that we launched in parallel...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-thumbnail'>
<a href='http://peekaboo-vision.blogspot.be/2012/09/recap-of-my-first-kaggle-competition.html' target='_blank'>
<img alt='' border='0' height='72' src='http://2.bp.blogspot.com/-PMVd1aUeky4/UGNp0ALNAiI/AAAAAAAAAIw/HvK9q7HIDeo/s72-c/all_plots_small.png' width='72'/>
</a>
</div>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2012/09/recap-of-my-first-kaggle-competition.html'>Recap of my first Kaggle Competition: Detecting Insults in Social Commentary [update 3]</a></div>
<div class='item-snippet'>Recently I entered my first kaggle  competition - for those who don&#39;t know it, it is a site running machine learning competitions. A dat...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-thumbnail'>
<a href='http://peekaboo-vision.blogspot.be/2012/06/structured-svm-and-structured.html' target='_blank'>
<img alt='' border='0' height='72' src='http://1.bp.blogspot.com/-HrI02t34qu4/T85aNLGVI2I/AAAAAAAAAGo/7l51Hmv6ZEY/s72-c/denoise.png' width='72'/>
</a>
</div>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2012/06/structured-svm-and-structured.html'>Structured SVM and Structured Perceptron for CRF learning in Python</a></div>
<div class='item-snippet'>[EDIT: If you are reading this now, have a look at pystruct.github.io . The project matured quit a bit in the meantime.]&#160;   Today I pushed s...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2013/01/pystruct-more-structured-prediction.html'>pystruct: more structured prediction with python</a></div>
<div class='item-snippet'>Some time ago I wrote about a structured learning project  I have been working on for some time, called pystruct .  After not working on it ...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-thumbnail'>
<a href='http://peekaboo-vision.blogspot.be/2012/05/graphcuts-for-python-pygco.html' target='_blank'>
<img alt='' border='0' height='72' src='http://1.bp.blogspot.com/-9xM3n7eFAag/T7kjCGyTMaI/AAAAAAAAAF0/Js3MJiHAFd0/s72-c/simple.png' width='72'/>
</a>
</div>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2012/05/graphcuts-for-python-pygco.html'>Graphcuts for Python: pygco (slight update)</a></div>
<div class='item-snippet'>I have been using the excellent gco  library for energy minimization with graph cuts for quite some time. Finally I got around to clean up /...</div>
</div>
<div style='clear: both;'></div>
</li>
<li>
<div class='item-content'>
<div class='item-title'><a href='http://peekaboo-vision.blogspot.be/2010/11/restricted-boltzmann-machine-on-cuda.html'>Restricted Boltzmann Machine on CUDA with Python</a></div>
<div class='item-snippet'>As promised, my group  recently published our Restricted Boltzmann Machine implementation .  It is based upon the CUV Library  that is being...</div>
</div>
<div style='clear: both;'></div>
</li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=7345806147365425073&widgetType=PopularPosts&widgetId=PopularPosts1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("PopularPosts1"));' target='configPopularPosts1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget LinkList' id='LinkList1'>
<h2>Links</h2>
<div class='widget-content'>
<ul>
<li><a href='http://scikit-learn.org/dev'>scikit-learn</a></li>
<li><a href='https://twitter.com/t3kcit'>Me on Twitter</a></li>
<li><a href='http://www.ais.uni-bonn.de/~amueller/'>My University Website</a></li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=7345806147365425073&widgetType=LinkList&widgetId=LinkList1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("LinkList1"));' target='configLinkList1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget PageList' id='PageList1'>
<h2>Pages</h2>
<div class='widget-content'>
<ul>
<li><a href='http://peekaboo-vision.blogspot.be/'>Home</a></li>
<li><a href='http://peekaboo-vision.blogspot.be/p/helpful-code.html'>Favourite Code</a></li>
<li><a href='http://peekaboo-vision.blogspot.be/p/papers.html'>Favourite Readings</a></li>
</ul>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=7345806147365425073&widgetType=PageList&widgetId=PageList1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("PageList1"));' target='configPageList1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div><div class='widget CustomSearch' id='CustomSearch1'>
<h2 class='title'>Search This Blog</h2>
<div class='widget-content'>
<div id='CustomSearch1_form'>
<span class='cse-status'>Loading...</span>
</div>
</div>
<style type='text/css'>
      #uds-searchControl .gs-result .gs-title,
      #uds-searchControl .gs-result .gs-title *,
      #uds-searchControl .gsc-results .gsc-trailing-more-results,
      #uds-searchControl .gsc-results .gsc-trailing-more-results * {
        color:#d52a33;
      }

      #uds-searchControl .gs-result .gs-title a:visited,
      #uds-searchControl .gs-result .gs-title a:visited * {
        color:#7d181e;
      }

      #uds-searchControl .gs-relativePublishedDate,
      #uds-searchControl .gs-publishedDate {
        color: #908d6a;
      }

      #uds-searchControl .gs-result a.gs-visibleUrl,
      #uds-searchControl .gs-result .gs-visibleUrl {
        color: #d52a33;
      }

      #uds-searchControl .gsc-results {
        border-color: #908d6a;
        background-color: #fefdfa;
      }

      #uds-searchControl .gsc-tabhActive {
        border-color: #908d6a;
        border-top-color: #908d6a;
        background-color: #fefdfa;
        color: #222222;
      }

      #uds-searchControl .gsc-tabhInactive {
        border-color: #908d6a;
        background-color: transparent;
        color: #d52a33;
      }

      #uds-searchClearResults {
        border-color: #908d6a;
      }

      #uds-searchClearResults:hover {
        border-color: #908d6a;
      }

      #uds-searchControl .gsc-cursor-page {
        color: #d52a33;
      }

      #uds-searchControl .gsc-cursor-current-page {
        color: #222222;
      }
    </style>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=7345806147365425073&widgetType=CustomSearch&widgetId=CustomSearch1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("CustomSearch1"));' target='configCustomSearch1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div><div class='widget Profile' id='Profile1'>
<h2>About Me</h2>
<div class='widget-content'>
<a href='https://plus.google.com/112544080214919445884'><img alt='My Photo' class='profile-img' height='80' src='//lh3.googleusercontent.com/-c3htHJS1uhY/AAAAAAAAAAI/AAAAAAAAANA/QbqDAOWyogk/s512-c/photo.jpg' width='80'/></a>
<dl class='profile-datablock'>
<dt class='profile-data'>
<a class='profile-name-link g-profile' href='https://plus.google.com/112544080214919445884' rel='author' style='background-image: url(//www.google.com/images/icons/ui/gprofile_button-16.png);'>
Andreas Mueller
</a>
<br/>
<div class='g-follow' data-annotation='bubble' data-height='20' data-href='https://plus.google.com/112544080214919445884'></div>
</dt>
</dl>
<a class='profile-link' href='https://plus.google.com/112544080214919445884' rel='author'>View my complete profile</a>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=7345806147365425073&widgetType=Profile&widgetId=Profile1&action=editWidget&sectionId=sidebar-right-1' onclick='return _WidgetManager._PopupConfig(document.getElementById("Profile1"));' target='configProfile1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style='clear: both'></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class='main-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<footer>
<div class='footer-outer'>
<div class='footer-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left footer-fauxborder-left'>
<div class='fauxborder-right footer-fauxborder-right'></div>
<div class='region-inner footer-inner'>
<div class='foot section' id='footer-1'></div>
<table border='0' cellpadding='0' cellspacing='0' class='section-columns columns-3'>
<tbody>
<tr>
<td class='first columns-cell'>
<div class='foot section' id='footer-2-1'></div>
</td>
<td class='columns-cell'>
<div class='foot section' id='footer-2-2'></div>
</td>
<td class='columns-cell'>
<div class='foot section' id='footer-2-3'></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class='foot section' id='footer-3'><div class='widget Attribution' id='Attribution1'>
<div class='widget-content' style='text-align: center;'>
Awesome Inc. template. Powered by <a href='http://www.blogger.com' target='_blank'>Blogger</a>.
</div>
<div class='clear'></div>
<span class='widget-item-control'>
<span class='item-control blog-admin'>
<a class='quickedit' href='//www.blogger.com/rearrange?blogID=7345806147365425073&widgetType=Attribution&widgetId=Attribution1&action=editWidget&sectionId=footer-3' onclick='return _WidgetManager._PopupConfig(document.getElementById("Attribution1"));' target='configAttribution1' title='Edit'>
<img alt='' height='18' src='http://img1.blogblog.com/img/icon18_wrench_allbkg.png' width='18'/>
</a>
</span>
</span>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='footer-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class='content-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<script type='text/javascript'>
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>
<script type="text/javascript">
if (window.jstiming) window.jstiming.load.tick('widgetJsBefore');
</script><script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/3401484092-widgets.js"></script>
<script type="text/javascript" src="//www.google.com/jsapi"></script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type='text/javascript'>
if (typeof(BLOG_attachCsiOnload) != 'undefined' && BLOG_attachCsiOnload != null) { window['blogger_templates_experiment_id'] = "templatesV2";window['blogger_blog_id'] = '7345806147365425073';BLOG_attachCsiOnload('item_'); }_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d7345806147365425073','//peekaboo-vision.blogspot.be/2012/11/a-wordcloud-in-python.html','7345806147365425073');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '7345806147365425073', 'bloggerUrl': 'http://www.blogger.com', 'title': 'Peekaboo', 'pageType': 'item', 'postId': '1871837941182536709', 'url': 'http://peekaboo-vision.blogspot.be/2012/11/a-wordcloud-in-python.html', 'canonicalUrl': 'http://peekaboo-vision.blogspot.com/2012/11/a-wordcloud-in-python.html', 'canonicalHomepageUrl': 'http://peekaboo-vision.blogspot.com/', 'homepageUrl': 'http://peekaboo-vision.blogspot.be/', 'blogspotFaviconUrl': 'http://peekaboo-vision.blogspot.be/favicon.ico', 'enabledCommentProfileImages': true, 'adultContent': false, 'disableAdSenseWidget': false, 'analyticsAccountNumber': '', 'searchLabel': '', 'searchQuery': '', 'pageName': 'A Wordcloud in Python', 'pageTitle': 'Peekaboo: A Wordcloud in Python', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'languageDirection': 'ltr', 'feedLinks': '\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42Peekaboo - Atom\42 href\75\42http://peekaboo-vision.blogspot.com/feeds/posts/default\42 /\76\n\74link rel\75\42alternate\42 type\75\42application/rss+xml\42 title\75\42Peekaboo - RSS\42 href\75\42http://peekaboo-vision.blogspot.com/feeds/posts/default?alt\75rss\42 /\76\n\74link rel\75\42service.post\42 type\75\42application/atom+xml\42 title\75\42Peekaboo - Atom\42 href\75\42http://www.blogger.com/feeds/7345806147365425073/posts/default\42 /\76\n\n\74link rel\75\42alternate\42 type\75\42application/atom+xml\42 title\75\42Peekaboo - Atom\42 href\75\42http://peekaboo-vision.blogspot.com/feeds/1871837941182536709/comments/default\42 /\76\n', 'meTag': '', 'openIdOpTag': '', 'googleProfileUrl': 'https://plus.google.com/112544080214919445884', 'postImageThumbnailUrl': 'http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s72-c/constitution_.png', 'postImageUrl': 'http://4.bp.blogspot.com/-cjfJLOPGjIg/UJmCmBa65tI/AAAAAAAAAJk/TF2qRh964GI/s400/constitution_.png', 'latencyHeadScript': '\74script type\75\42text/javascript\42\76(function() { var b\75window,f\75\42chrome\42,g\75\42tick\42,k\75\42jstiming\42;(function(){function d(a){this.t\75{};this.tick\75function(a,d,c){var e\75void 0!\75c?c:(new Date).getTime();this.t[a]\75[e,d];if(void 0\75\75c)try{b.console.timeStamp(\42CSI/\42+a)}catch(h){}};this[g](\42start\42,null,a)}var a;b.performance\46\46(a\75b.performance.timing);var n\75a?new d(a.responseStart):new d;b.jstiming\75{Timer:d,load:n};if(a){var c\75a.navigationStart,h\75a.responseStart;0\74c\46\46h\76\75c\46\46(b[k].srt\75h-c)}if(a){var e\75b[k].load;0\74c\46\46h\76\75c\46\46(e[g](\42_wtsrt\42,void 0,c),e[g](\42wtsrt_\42,\42_wtsrt\42,h),e[g](\42tbsd_\42,\42wtsrt_\42))}try{a\75null,\nb[f]\46\46b[f].csi\46\46(a\75Math.floor(b[f].csi().pageT),e\46\0460\74c\46\46(e[g](\42_tbnd\42,void 0,b[f].csi().startE),e[g](\42tbnd_\42,\42_tbnd\42,c))),null\75\75a\46\46b.gtbExternal\46\46(a\75b.gtbExternal.pageT()),null\75\75a\46\46b.external\46\46(a\75b.external.pageT,e\46\0460\74c\46\46(e[g](\42_tbnd\42,void 0,b.external.startE),e[g](\42tbnd_\42,\42_tbnd\42,c))),a\46\46(b[k].pt\75a)}catch(p){}})();b.tickAboveFold\75function(d){var a\0750;if(d.offsetParent){do a+\75d.offsetTop;while(d\75d.offsetParent)}d\75a;750\76\75d\46\46b[k].load[g](\42aft\42)};var l\75!1;function m(){l||(l\75!0,b[k].load[g](\42firstScrollTime\42))}b.addEventListener?b.addEventListener(\42scroll\42,m,!1):b.attachEvent(\42onscroll\42,m);\n })();\74/script\076', 'mobileHeadScript': '', 'ieCssRetrofitLinks': '\74!--[if IE]\76\74script type\75\42text/javascript\42 src\75\42https://www.blogger.com/static/v1/jsbin/1163241896-ieretrofit.js\42\76\74/script\76\n\74![endif]--\076', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/76f25a6f2e06af76', 'plusOneApiSrc': 'https://apis.google.com/js/plusone.js', 'sf': 'n', 'tf': ''}}, {'name': 'skin', 'data': {'vars': {'date_border_size': '0', 'description_font': 'normal normal 20px Consolas', 'body_background_gradient_cap': 'none', 'tabs_selected_background_color': '#63704b', 'footer_background_gradient': 'none', 'date_background': 'transparent none no-repeat scroll top left', 'widget_border_radius': '5px', 'post_title_text_color': '#d52a33', 'widget_font': 'normal normal 14px Droid Sans', 'widget_link_hover_color': '#d52a33', 'link_visited_color': '#7d181e', 'mobile_background_size': 'auto', 'date_space': '30px', 'post_title_font': 'normal normal 24px Droid Sans', 'tabs_text_color': '#333333', 'title_separator_border_size': '1px', 'header_background_gradient': 'none', 'widget_outer_background_gradient': 'none', 'widget_link_color': '#d52a33', 'mobile_button_color': '#ffffff', 'widget_title_font': 'normal bold 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif', 'widget_outer_background_color': 'transparent', 'date_last_border_radius_bottom': '5px', 'widget_outer_margin_top': '0', 'shadow_spread': '20px', 'title_shadow_spread': '-1px', 'outer_shadow_spread': '0', 'keycolor': '#b3ca88', 'image_shadow_spread': '20px', 'image_background_color': '#ffffff', 'header_font': 'normal normal 48px Droid Sans', 'header_background_color': 'transparent', 'date_header_border_radius_top': '0', 'widget_border_bevel_color': 'transparent', 'tabs_border_color': '#908d6a', 'widget_background_color': '#fefdfa', 'date_position': 'static', 'post_first_padding_top': '0', 'tabs_background_gradient': 'url(//www.blogblog.com/1kt/awesomeinc/tabs_gradient_light.png)', 'mobile_background_overlay': 'transparent none repeat scroll top left', 'date_border_color': '#666666', 'tabs_background_color': '#b3ca88', 'widget_link_visited_color': '#7d181e', 'feed_text_color': '#222222', 'header_margin_top': '0', 'link_hover_color': '#d52a33', 'date_last_space_bottom': '20px', 'header_margin_bottom': '0', 'date_padding_bottom': '0', 'list_separator_border_size': '0', 'description_text_color': '#908d6a', 'body_text_color': '#222222', 'header_padding_top': '22px', 'post_border_color': '#666666', 'footer_text_color': '#222222', 'post_background_color': '#fefdfa', 'pager_space_top': '1em', 'endSide': 'right', 'startSide': 'left', 'body_background_size': 'auto', 'tabs_font': 'normal normal 13px Arial, Tahoma, Helvetica, FreeSans, sans-serif', 'body_font': 'normal normal 14px Droid Sans', 'date_first_border_radius_top': '5px', 'date_header_position': '15px', 'date_text_color': '#908d6a', 'widget_title_text_color': '#222222', 'image_border_color': '#cccccc', 'separator_outdent': '0', 'widget_text_color': '#222222', 'link_color': '#d52a33', 'widget_border_color': '#666666', 'pager_border_radius_top': '5px', 'feed_link_color': '#d52a33', 'header_text_color': '#222222', 'footer_background_color': '#fefdfa', 'widget_padding_top': '8px', 'feed_link_visited_color': '#7d181e', 'feed_link_hover_color': '#d52a33', 'date_font': 'normal normal 10px Droid Sans', 'tabs_selected_text_color': '#ffffff', 'date_side': 'right', 'post_border_bevel_color': '#ffffff', 'widget_padding_side': '15px', 'body_background_color': '#ffffff', 'image_border_radius': '5px', 'pager_background_color': '#fefdfa', 'widget_alternate_text_color': '#666666'}, 'override': '.post-footer {font-size: 7pt}'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\75classic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\75flipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\75magazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\75mosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\75sidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\75snapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\75timeslide'}}}]);
_WidgetManager._RegisterWidget('_PopularPostsView', new _WidgetInfo('PopularPosts1', 'sidebar-right-1', null, document.getElementById('PopularPosts1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LinkListView', new _WidgetInfo('LinkList1', 'sidebar-right-1', null, document.getElementById('LinkList1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PageListView', new _WidgetInfo('PageList1', 'sidebar-right-1', null, document.getElementById('PageList1'), {'title': 'Pages', 'links': [{'href': 'http://peekaboo-vision.blogspot.be/', 'title': 'Home', 'isCurrentPage': false}, {'href': 'http://peekaboo-vision.blogspot.be/p/helpful-code.html', 'title': 'Favourite Code', 'isCurrentPage': false, 'id': '3420650733863075465'}, {'href': 'http://peekaboo-vision.blogspot.be/p/papers.html', 'title': 'Favourite Readings', 'isCurrentPage': false, 'id': '197336439863235251'}], 'mobile': false}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_CustomSearchView', new _WidgetInfo('CustomSearch1', 'sidebar-right-1', null, document.getElementById('CustomSearch1'), {'title': 'Search This Blog', 'includeBlog': true, 'includePostLinks': false, 'includeWeb': false, 'linkLists': [], 'blogUrl': 'http://peekaboo-vision.blogspot.com/', 'loadingMsg': 'Loading...', 'thisBlogMsg': 'This Blog', 'linkedFromHereMsg': 'Linked From Here', 'theWebMsg': 'The Web', 'backgroundColor': '#fefdfa', 'textColor': '#222222', 'dateColor': '#908d6a', 'linkColor': '#d52a33', 'urlColor': '#d52a33', 'visitedLinkColor': '#7d181e', 'borderColor': '#908d6a', 'activeBorderColor': '#908d6a'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', null, document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', null, document.getElementById('Attribution1'), {'attribution': 'Awesome Inc. template. Powered by \74a href\75\47http://www.blogger.com\47 target\75\47_blank\47\76Blogger\74/a\76.'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', null, document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', null, document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', null, document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'showBacklinks': true, 'postId': '1871837941182536709', 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/1938910137-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/2392111094-lightbox_bundle.css'}, 'displayModeFull'));
</script>
</body>
</html>